import{_ as i,c as a,a as e,o as l}from"./app-C7T5jqfQ.js";const n="/blogs/assets/image-20230727111430793-B4ZsyHQ4.png",h="/blogs/assets/image-20230727142413455-BvuH73QS.png",t="/blogs/assets/image-20230727142433699-CsNlHsNK.png",k="/blogs/assets/image-20230727142909434-B_3GiDNx.png",d="/blogs/assets/image-20230727143048517-Crjt8MGx.png",r="/blogs/assets/image-20230727143514093-By-goECu.png",p={};function c(g,s){return l(),a("div",null,s[0]||(s[0]=[e('<h2 id="什么是docker" tabindex="-1"><a class="header-anchor" href="#什么是docker"><span>什么是Docker</span></a></h2><ul><li>Docker如何解决依赖的兼容问题 <ul><li>将<strong>应用的Libs（函数库）、Deps（依赖）、配置与应用一起打包</strong></li><li>将每个应用放到一个隔离容器去运行，避免互相干扰</li></ul></li></ul><p><img src="'+n+'" alt="image-20230727111430793"></p><ul><li>Docker如何解决大型项目依赖关系复杂，不同组件依赖的兼容性问题 <ul><li>Docker允许开发中将应用、依赖、函数库、配置一起打包，形成可移植镜像</li><li>Docker应用运行在容器中，使用沙箱机制，相互隔离</li><li>Docker镜像中包含完整运行环境，包括系统函数库，仅依赖系统的linux内容，因此可以在任意Linux操作系统运行</li></ul></li></ul><h2 id="docker和虚拟机的区别" tabindex="-1"><a class="header-anchor" href="#docker和虚拟机的区别"><span>Docker和虚拟机的区别</span></a></h2><ul><li>虚拟机是在操作系统中模拟硬件设备，然后运行另一个操作系统，比如在Windows系统里面运行Ubuntu系统，这样就可以运行任意的Ubuntu应用了</li><li>Docker是一个系统进程，虚拟机是在操作系统中的操作系统</li></ul><p><img src="'+h+'" alt="image-20230727142413455"></p><p><img src="'+t+'" alt="image-20230727142433699"></p><h2 id="docker架构" tabindex="-1"><a class="header-anchor" href="#docker架构"><span>Docker架构</span></a></h2><h3 id="镜像和容器" tabindex="-1"><a class="header-anchor" href="#镜像和容器"><span>镜像和容器</span></a></h3><ul><li>镜像：Docker将应用程序及其所需的依赖，函数库、环境、配置等文件打包在一起，称为镜像，相当于容器的模板</li><li>容器：镜像中的应用程序运行后形成的进程就是容器，只是Docker会给容器做隔离，对外不可见，可以理解成一个轻量级的虚拟机</li></ul><p><img src="'+k+'" alt="image-20230727142909434"></p><h3 id="dockerhub" tabindex="-1"><a class="header-anchor" href="#dockerhub"><span>DockerHub</span></a></h3><ul><li><p><strong>docker hub</strong>https://hub.docker.com/</p></li><li><p>DockerHUb：DockerHub是一个Docker镜像的托管平台，这样的平台称为Docker Registry</p><p><img src="'+d+'" alt="image-20230727143048517"></p></li></ul><h3 id="docker架构-1" tabindex="-1"><a class="header-anchor" href="#docker架构-1"><span>Docker架构</span></a></h3><p>Docker是一个cs架构的程序，由两部分组成</p><ul><li>服务端（Sever）：Docker守护进程，负责处理Docker指令、管理镜像、容器等</li><li>客户端（client）：通过命令或RestApi向Docker服务端发送指令，可以在本地或远程向服役端发送指令</li></ul><p><img src="'+r+`" alt="image-20230727143514093"></p><h2 id="安装docker" tabindex="-1"><a class="header-anchor" href="#安装docker"><span>安装Docker</span></a></h2><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h3><ul><li>卸载老的Docker及依赖</li></ul><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> remove</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  docker-client</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  docker-client-latest</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  docker-common</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  docker-latest</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  docker-latest-logrotate</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  docker-logrotate</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  docker-engine</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>安装一些依赖库</li></ul><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -y</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yum-utils</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  device-mapper-persistent-data</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  lvm2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>设置稳定版本的库</li></ul><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yum-config-manager</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    --add-repo</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    https://download.docker.com/linux/centos/docker-ce.repo</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>安装Dockers CE</li></ul><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -y</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker-ce</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>安装完之后启动</li></ul><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>测试是否安装成功</li></ul><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">root@pdai </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"># systemctl status docker</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">●</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker.service</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Application</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Engine</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">   Loaded:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> loaded</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (/usr/lib/systemd/system/docker.service</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> disabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> vendor</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> preset:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> disabled</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">   Active:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> active</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (running) since Mon 2020-02-17 13:57:45 CST</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 39s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">     Docs:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://docs.docker.com</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Main</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PID:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 26029</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (dockerd)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Tasks:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 8</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">   Memory:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 36.9M</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">   CGroup:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /system.slice/docker.service</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">           └─26029</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/bin/dockerd</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -H</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fd://</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --containerd=/run/containerd/containerd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置镜像加速" tabindex="-1"><a class="header-anchor" href="#配置镜像加速"><span>配置镜像加速</span></a></h3><ul><li>仓库配置 <ul><li>Docker 安装好以后，我们就要开始为拉取镜像准备了；国内从 DockerHub 拉取镜像有时会特别慢，此时可以<strong>配置镜像加速器</strong>。</li><li>阿里云的加速器：https://help.aliyun.com/document_detail/60750.html</li><li>对于使用 systemd 的系统，请在 /etc/docker/daemon.json 中写入如下内容（如果文件不存在请新建该文件</li></ul></li></ul><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;registry-mirrors&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;https://registry.docker-cn.com&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">]}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>重新启动服务</li></ul><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> restart</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,37)]))}const u=i(p,[["render",c]]),m=JSON.parse('{"path":"/os/opnlb567/","title":"初识Docker","lang":"zh-CN","frontmatter":{"title":"初识Docker","createTime":"2025/04/05 16:51:44","permalink":"/os/opnlb567/"},"headers":[],"readingTime":{"minutes":2.55,"words":766},"git":{"updatedTime":1743864983000,"contributors":[{"name":"舒永好","username":"舒永好","email":"shuyonghao@guoshenghuaxing.com","commits":1,"avatar":"https://gravatar.com/avatar/4b1c3f37ea707968be73c631a79de33afd360724ce87bf8f9dcacd67d14df92c?d=retro"}]},"filePathRelative":"notes/os/docker/readme.md"}');export{u as comp,m as data};

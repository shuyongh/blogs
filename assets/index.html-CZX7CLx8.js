import{_ as s,c as e,a,o as n}from"./app-C7T5jqfQ.js";const l="/blogs/assets/image-20230928102514220-nesBOlw0.png",d="/blogs/assets/image-20230928102551407-BtOom0fr.png",t="/blogs/assets/image-20230514004211846-BifVSYIQ.png",r="/blogs/assets/image-20231011155229120-BEGYgZGq.png",p="/blogs/assets/image-20231011155253152-QmBk9dLm.png",h="/blogs/assets/image-20231011155322118-BSvWIA_6.png",c="/blogs/assets/image-20231011155342045-hyVqxp7r.png",g="/blogs/assets/image-20231011155350629-BwUSneWm.png",v="/blogs/assets/image-20231011155413650-2FCXG5sx.png",u="/blogs/assets/image-20231011155506589-BTNXSIgt.png",k="/blogs/assets/image-20231011155529141-fItUVLal.png",m="/blogs/assets/image-20231011155539936-D3PB_9-6.png",b={};function o(f,i){return n(),e("div",null,i[0]||(i[0]=[a(`<ul><li>Nginx是使用C语言编写的程序，因此想要运行Nginx就需要安装一个编 译工具。GCC就是一个开源的编译器集合，用于处理各种各样的语言， 其中就包含了C语言。</li><li>Nginx在编译过程中需要使用到PCRE库（perl Compatible Regular Expressoin 兼容正则表达式库)，因为在Nginx的Rewrite模块和http核 心模块都会使用到PCRE正则表达式语法。</li><li>zlib库提供了开发人员的压缩算法，在Nginx的各个模块中需要使用gzip 压缩，所以我们也需要提前安装其库及源代码zlib和zlib-devel</li><li>OpenSSL是一个开放源代码的软件库包，应用程序可以使用这个包进行 安全通信，并且避免被窃听。</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>yum install -y gcc pcre pcre-devel zlib zlib-devel openssl openssl-devel</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="nginx源码简单安装" tabindex="-1"><a class="header-anchor" href="#nginx源码简单安装"><span>Nginx源码简单安装</span></a></h2><ul><li>进入官网查找需要下载版本的链接地址，然后使用wget命令进行下载</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>wget http://nginx.org/download/nginx-1.16.1.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>解压缩</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>tar -zxvf nginx-1.16.1.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>发现configure</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>./configure</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>编译</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>make</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>安装</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>make install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="yum安装" tabindex="-1"><a class="header-anchor" href="#yum安装"><span>yum安装</span></a></h2><ul><li>安装yum-utils</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>sudo yum install -y yum-utils</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>添加yum源文件</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>vim /etc/yum.repos.d/nginx.repo</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>[nginx-stable]</span></span>
<span class="line"><span>name=nginx stable repo</span></span>
<span class="line"><span>baseurl=http://nginx.org/packages/centos/$releasever/</span></span>
<span class="line"><span>$basearch/</span></span>
<span class="line"><span>gpgcheck=1</span></span>
<span class="line"><span>enabled=1</span></span>
<span class="line"><span>gpgkey=https://nginx.org/keys/nginx_signing.key</span></span>
<span class="line"><span>module_hotfixes=true</span></span>
<span class="line"><span>[nginx-mainline]</span></span>
<span class="line"><span>name=nginx mainline repo</span></span>
<span class="line"><span>baseurl=http://nginx.org/packages/mainline/centos/$re</span></span>
<span class="line"><span>leasever/$basearch/</span></span>
<span class="line"><span>gpgcheck=1</span></span>
<span class="line"><span>enabled=0</span></span>
<span class="line"><span>gpgkey=https://nginx.org/keys/nginx_signing.key</span></span>
<span class="line"><span>module_hotfixes=true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>查看是否安装成功</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>yum list | grep nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+l+'" alt="image-20230928102514220"></p><ul><li>使用yum进行安装</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>yun install -y nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>查看nginx的安装位置</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>whereis nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+d+`" alt="image-20230928102551407"></p><h2 id="nginx源码复杂安装" tabindex="-1"><a class="header-anchor" href="#nginx源码复杂安装"><span>Nginx源码复杂安装</span></a></h2><p>--prefix=PATH</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>指向Nginx的安装目录，默认值为/usr/local/nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>--sbin-path=PATH</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>指向(执行)程序文件(nginx)的路径,默认值为&lt;prefix&gt;/sbin/nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>--modules-path=PATH</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>指向Nginx动态模块安装目录，默认值为&lt;prefix&gt;/modules</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>--conf-path=PATH</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>指向配置文件(nginx.conf)的路径,默认值为</span></span>
<span class="line"><span>&lt;prefix&gt;/conf/nginx.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>--error-log-path=PATH</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>指向错误日志文件的路径,默认值为&lt;prefix&gt;/logs/error.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>--http-log-path=PATH</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>指向访问日志文件的路径,默认值为&lt;prefix&gt;/logs/access.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>--pid-path=PATH</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>指向Nginx启动后进行ID的文件路径，默认值为</span></span>
<span class="line"><span>&lt;prefix&gt;/logs/nginx.pid</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>--lock-path=PATH</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>指向Nginx锁文件的存放路径,默认值为&lt;prefix&gt;/logs/nginx.lock</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>例如</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>./configure --prefix=/usr/local/nginx \\</span></span>
<span class="line"><span>--sbin-path=/usr/local/nginx/sbin/nginx \\</span></span>
<span class="line"><span>--modules-path=/usr/local/nginx/modules \\</span></span>
<span class="line"><span>--conf-path=/usr/local/nginx/conf/nginx.conf \\</span></span>
<span class="line"><span>--error-log-path=/usr/local/nginx/logs/error.log \\</span></span>
<span class="line"><span>--http-log-path=/usr/local/nginx/logs/access.log \\</span></span>
<span class="line"><span>--pid-path=/usr/local/nginx/logs/nginx.pid \\</span></span>
<span class="line"><span>--lock-path=/usr/local/nginx/logs/nginx.lock</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Nginx（engine x）是一个具有高性能的【HTTP】和【反向代理】的【WEB服务器】，同时也是一个【POP3、SMTP、IMAP代理服务器】</p></li><li><p>WEB服务器</p><ul><li>web服务器也叫网页服务器，英文名叫Web Server，主要功能是为用户提供网上信息浏览服务</li></ul></li><li><p>HTTP</p><ul><li>HTTP是超文本传输协议，是用于从WEB服务器传输超文本到本地水产品的传输协议，也是互联网上应用最为广泛的一种网络协议</li></ul></li><li><p>POP3/SMTP/IMAP</p><ul><li>POP3(Post Offic Protocol 3)邮局协议的第三个版本</li><li>SMTP(Simple Mail Transfer Protocol)简单邮件传输协议</li><li>IMAP(Internet Mail Access Protocol)交互式邮件存取协议</li></ul></li><li><p>反向代理</p></li></ul><p><img src="`+t+`" alt="image-20230514004211846"></p><h2 id="nginx配置成系统服务" tabindex="-1"><a class="header-anchor" href="#nginx配置成系统服务"><span>Nginx配置成系统服务</span></a></h2><ul><li>在/usr/lib/systemd/system目录下添加nginx.service,内容如下:</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>[Unit]</span></span>
<span class="line"><span>Description=nginx web service</span></span>
<span class="line"><span>Documentation=http://nginx.org/en/docs/</span></span>
<span class="line"><span>After=network.target</span></span>
<span class="line"><span>[Service]</span></span>
<span class="line"><span>Type=forking</span></span>
<span class="line"><span>PIDFile=/usr/local/nginx/logs/nginx.pid</span></span>
<span class="line"><span>ExecStartPre=/usr/local/nginx/sbin/nginx -t -c /usr/local/nginx/conf/nginx.conf</span></span>
<span class="line"><span>ExecStart=/usr/local/nginx/sbin/nginx</span></span>
<span class="line"><span>ExecReload=/usr/local/nginx/sbin/nginx -s reload</span></span>
<span class="line"><span>ExecStop=/usr/local/nginx/sbin/nginx -s stop</span></span>
<span class="line"><span>PrivateTmp=true</span></span>
<span class="line"><span>[Install]</span></span>
<span class="line"><span>WantedBy=default.target</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>添加完成后如果权限有问题需要进行权限设置</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>chmod 755 /usr/lib/systemd/system/nginx.service</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>使用系统命令来操作Nginx服务</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>启动: systemctl start nginx</span></span>
<span class="line"><span>停止: systemctl stop nginx</span></span>
<span class="line"><span>重启: systemctl restart nginx</span></span>
<span class="line"><span>重新加载配置文件: systemctl reload nginx</span></span>
<span class="line"><span>查看nginx状态: systemctl status nginx</span></span>
<span class="line"><span>开机启动: systemctl enable nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="nginx命令配置到系统环境" tabindex="-1"><a class="header-anchor" href="#nginx命令配置到系统环境"><span>Nginx命令配置到系统环境</span></a></h2><ul><li>修改/etc/profile文件</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>vim /etc/profile</span></span>
<span class="line"><span>在最后一行添加</span></span>
<span class="line"><span>export PATH=$PATH:/usr/local/nginx/sbin</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>使之立即生效</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>source /etc/profile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>执行nginx命令</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>nginx -V</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="php安装" tabindex="-1"><a class="header-anchor" href="#php安装"><span>PHP安装</span></a></h2><ul><li>安装PHP依赖</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>yum -y install libxml2-devel sqlite-devel bzip2-devel libcurl-devel libpng-devel libjpeg-devel freetype-devel libicu-devel oniguruma-devel libxslt-devel krb5-devel  openssl openssl-devel epel-release libmcrypt-devel oniguruma oniguruma-devel</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>下载依赖包</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span> wget https://nih.at/libzip/libzip-1.2.0.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>解压依赖包</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span> tar xf libzip-1.2.0.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>配置编译安装依赖包</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span> cd libzip-1.2.0</span></span>
<span class="line"><span> ./configure</span></span>
<span class="line"><span>make&amp;&amp;make install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>配置环境变量</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>vim /etc/profile.d/libzip.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>内容如下：</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig:$PKG_CONFIG_PATH</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>更新环境</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>source /etc/profile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>下载php</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>wget https://www.php.net/distributions/php-8.2.11.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>configure <ul><li>指定prefix，可执行文件默认放在/usr/local/bin，库文件默认放在/usr/local/lib，配置文件默认放在/usr/local/etc，其它的资源文件放在/usr/local/share</li></ul></li></ul><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">./configure</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --prefix=/usr/local/php</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --with-config-file-path=/usr/local/php/etc</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --enable-fpm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  --enable-zlib</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --enable-zip</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  --enable-mbstring</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --with-mcrypt</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --with-mysql</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --with-mysqli</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --with-pdo-mysql</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --with-gd</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --with-jpeg-dir</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --with-png-dir</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --with-freetype-dir</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --with-openssl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --with-mhash</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --enable-bcmath</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --enable-opcache</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>./configure --prefix=/usr/local/php --with-apxs2=/usr/local/apache2/bin/apxs --enable-zlib --enable-zip -enable-mbstring --with-mcrypt --with-mysql --with-mysqli --with-pdo-mysql --with-gd --with-jpeg-dir --with-png-dir --with-freetype-dir --with-openssl --with-mhash --enable-bcmath --enable-opcache --with-curl</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>编译安装</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>make &amp;&amp; make install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="生成各配置文件" tabindex="-1"><a class="header-anchor" href="#生成各配置文件"><span>生成各配置文件</span></a></h2><ul><li>生成php.ini配置文件</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>cp php.ini-production /usr/local/php/etc/php.ini</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+r+`" alt="image-20231011155229120"></p><ul><li>生成www.conf配置文件</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>cd /usr/local/php/etc/php-fpm.d/</span></span>
<span class="line"><span>cp www.conf.default www.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+p+`" alt="image-20231011155253152"></p><ul><li>生成php-fpm配置文件</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>cd ..</span></span>
<span class="line"><span>cp php-fpm.conf.default php-fpm.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+h+'" alt="image-20231011155322118"></p><h2 id="配置php文件" tabindex="-1"><a class="header-anchor" href="#配置php文件"><span>配置PHP文件</span></a></h2><ul><li>配置php.ini文件</li></ul><p><img src="'+c+'" alt="image-20231011155342045"></p><ul><li>编辑配置文件如下</li></ul><p><img src="'+g+`" alt="image-20231011155350629"></p><h2 id="生成php-fpm启动文件" tabindex="-1"><a class="header-anchor" href="#生成php-fpm启动文件"><span>生成php-fpm启动文件</span></a></h2><ul><li>创建启动目录，复制启动文件，修改启动文件</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>[root@www php-8.2.7]# mkdir /usr/local/php/daemon</span></span>
<span class="line"><span>[root@www php-8.2.7]# cp sapi/fpm/init.d.php-fpm /usr/local/php/daemon/</span></span>
<span class="line"><span>[root@www php-8.2.7]# chmod 740 /usr/local/php/daemon/init.d.php-fpm</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+v+`" alt="image-20231011155413650"></p><ul><li>配置system启动</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>[Unit]</span></span>
<span class="line"><span>Description=The PHP FastCGI Process Manager</span></span>
<span class="line"><span>After=syslog.target network.target</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Service]</span></span>
<span class="line"><span>Type=simple</span></span>
<span class="line"><span>PIDFile=/run/php-fpm.pid</span></span>
<span class="line"><span>ExecStart=/usr/local/php/sbin/php-fpm --nodaemonize --fpm-config /usr/local/php/etc/php-fpm.conf</span></span>
<span class="line"><span>ExecReload=/bin/kill -USR2 $MAINPID</span></span>
<span class="line"><span>ExecStop=/bin/kill -SIGINT $MAINPID</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Install]</span></span>
<span class="line"><span>WantedBy=multi-user.target</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>system重载</li></ul><p><img src="`+u+'" alt="image-20231011155506589"></p><h2 id="启动php-fpm" tabindex="-1"><a class="header-anchor" href="#启动php-fpm"><span>启动php-fpm</span></a></h2><ul><li>启动php-fpm</li></ul><p><img src="'+k+'" alt="image-20231011155529141"></p><p>三、卸载PHP 直接删除php包即可</p><p><img src="'+m+`" alt="image-20231011155539936"></p><h2 id="apache安装" tabindex="-1"><a class="header-anchor" href="#apache安装"><span>Apache安装</span></a></h2><ul><li>下载apache</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>wget https://downloads.apache.org/httpd/httpd-2.4.57.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>解压</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>tar -zxvf httpd-2.4.57.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>下载APR APR-Util</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>wget https://dlcdn.apache.org//apr/apr-1.7.4.tar.gz</span></span>
<span class="line"><span>wget https://dlcdn.apache.org//apr/apr-util-1.6.3.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>解压</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>tar -zxvf apr-1.7.4.tar.gz</span></span>
<span class="line"><span>tar -zxvf apr-util-1.6.3.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>arp-1.7.4移到 httpd-2.4.57/srclib/apr，将apr-util-1.6.3移到 httpd-2.4.57/srclib/apr-util</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>mv apr-1.7.4 httpd-2.4.57/srclib/apr</span></span>
<span class="line"><span>mv apr-util-1.6.3 httpd-2.4.57/srclib/apr-util</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>安装apache依赖</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>yum -y install pcre-devel openssl-devel expat-devel</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>configure</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>./configure --enable-so --enable-deflate --enable-ssl</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>编译安装</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>make &amp;&amp; make install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,129)]))}const y=s(b,[["render",o]]),w=JSON.parse('{"path":"/os/poqjx4lf/","title":"安装","lang":"zh-CN","frontmatter":{"title":"安装","createTime":"2025/04/05 14:39:46","permalink":"/os/poqjx4lf/"},"headers":[],"readingTime":{"minutes":4.94,"words":1483},"git":{"updatedTime":1743864983000,"contributors":[{"name":"舒永好","username":"舒永好","email":"shuyonghao@guoshenghuaxing.com","commits":1,"avatar":"https://gravatar.com/avatar/4b1c3f37ea707968be73c631a79de33afd360724ce87bf8f9dcacd67d14df92c?d=retro"}]},"filePathRelative":"notes/os/nginx/base/download.md"}');export{y as comp,w as data};

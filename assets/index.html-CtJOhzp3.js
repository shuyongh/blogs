import{_ as s,c as i,a as e,o as d}from"./app-C7T5jqfQ.js";const a={};function l(n,t){return d(),i("div",null,t[0]||(t[0]=[e(`<div class="hint-container tip"><p class="hint-container-title">提示</p><p><strong>注意：</strong> 内置函数 (BIF) 通常是无法用纯 Erlang 实现的函数，因此在 C 或 Erlang 所实现的任何语言中定义（在 80 年代是 Prolog）。仍然有一些 BIF 可以用 Erlang 完成，但仍然在 C 中实现，以提供更快的通用操作速度。其中一个例子是 <code>length(List)</code> 函数，它将返回（你猜对了）作为参数传入的列表的长度。</p></div><h2 id="c-模块" tabindex="-1"><a class="header-anchor" href="#c-模块"><span>c 模块</span></a></h2><blockquote><p>在 Erlang 中，<code>c</code> 模块是内置的模块，提供了一些函数来编译 <code>.erl</code> 源文件到 <code>.beam</code> 字节码文件。该模块不仅包含用于编译的命令，还提供了其他有用的编译功能，如加载和错误处理等。</p></blockquote><h3 id="编译" tabindex="-1"><a class="header-anchor" href="#编译"><span>编译</span></a></h3><blockquote><p>编译时，Erlang 会生成 <code>.beam</code> 文件，这些文件是 Erlang 虚拟机（BEAM）运行的字节码文件。</p></blockquote><h4 id="编译单个文件" tabindex="-1"><a class="header-anchor" href="#编译单个文件"><span>编译单个文件</span></a></h4><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">c</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ModuleName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">).</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong>：</p><ul><li><code>ModuleName</code>：一个 Erlang 模块名（去掉 <code>.erl</code> 后缀），这是一个原子类型（atom）。</li></ul><p><strong>返回值</strong>：</p><ul><li><code>{ok, ModuleName}</code> 表示成功编译并加载模块。</li><li><code>{error, Reason}</code> 表示编译过程中出错，返回错误信息。</li></ul><h4 id="编译文件并提供选项" tabindex="-1"><a class="header-anchor" href="#编译文件并提供选项"><span>编译文件并提供选项</span></a></h4><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">c</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ModuleName</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Options</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">).</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong>：</p><ul><li><code>ModuleName</code>：Erlang 模块名。</li><li><code>Options</code>：一个选项 <strong>列表</strong>，包含编译时的不同选项。</li></ul><p><strong>常见选项</strong>：</p><ul><li><strong><code>{debug_info, true}</code></strong>：生成调试信息。</li><li><strong><code>{warnings_as_errors, true}</code></strong>：将警告当作错误来处理。</li><li><strong><code>{i, Directory}</code></strong>：指定包含头文件的目录。</li><li><strong><code>{outdir, Directory}</code></strong>：指定编译输出目录。</li></ul><h4 id="编译多个文件" tabindex="-1"><a class="header-anchor" href="#编译多个文件"><span>编译多个文件</span></a></h4><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">c</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">compile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">([</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Module1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Module2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Module3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">])</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>返回值</strong>：</p><ul><li><code>{ok, Module1, Module2, Module3}</code> 表示所有模块成功编译。</li><li><code>{error, {compile, ErrorInfo}}</code> 表示编译时出错，返回错误信息。</li></ul><h4 id="调试编译" tabindex="-1"><a class="header-anchor" href="#调试编译"><span>调试编译</span></a></h4><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">c</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">debug</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Options</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> File</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong>：</p><ul><li><code>Options</code>：调试选项，如 <code>{warnings, true}</code>。</li><li><code>File</code>：指定要编译的文件。</li></ul><h2 id="code模块" tabindex="-1"><a class="header-anchor" href="#code模块"><span>code模块</span></a></h2><blockquote><p><code>code</code> 模块是 Erlang 标准库中负责代码加载和管理的核心模块，它提供了代码路径管理、模块加载、代码替换等功能</p></blockquote><table><thead><tr><th>函数</th><th>功能</th><th>参数</th><th>返回值</th></tr></thead><tbody><tr><td><code>code:get_path() -&gt; [Dir]</code></td><td>% 获取当前代码路径列表</td><td></td><td></td></tr><tr><td><code>code:add_path(Dir) -&gt; true | {error, bad_directory}</code></td><td>% 添加代码路径</td><td></td><td></td></tr><tr><td><code>code:add_patha(Dir) -&gt; true | {error, bad_directory} </code></td><td>添加到开头</td><td></td><td></td></tr><tr><td><code>code:add_pathz(Dir) -&gt; true | {error, bad_directory} </code></td><td>添加到末尾</td><td></td><td></td></tr><tr><td><code>code:del_path(NameOrDir) -&gt; boolean() | {error, What}</code></td><td>删除代码路径</td><td></td><td></td></tr><tr><td><code>code:set_path(Dirs) -&gt; true | {error, What}</code></td><td>替换整个代码路径</td><td></td><td></td></tr><tr><td><code>code:load_file(Module) -&gt; {module, Module} | {error, What}</code></td><td>加载模块（自动搜索代码路径）</td><td></td><td></td></tr><tr><td><code>code:load_abs(Filename) -&gt; {module, Module} | {error, What}</code></td><td>从绝对路径加载</td><td></td><td></td></tr><tr><td><code>code:load_binary(Module, Filename, Binary) -&gt; {module, Module} | {error, What}</code></td><td>从绝对路径加载</td><td></td><td></td></tr><tr><td><code>code:ensure_loaded(Module) -&gt; {module, Module} | {error, What}</code></td><td>确保模块已加载</td><td></td><td></td></tr><tr><td><code>code:purge(Module) -&gt; boolean()</code></td><td>删除指定模块的所有旧版本代码</td><td></td><td><code>true</code>：成功删除了旧代码 <br><code>false</code>：没有旧代码可删除</td></tr><tr><td><code>code:soft_purge(Module) -&gt; boolean()</code></td><td>安全清除（无进程使用旧代码时才清除）</td><td></td><td></td></tr><tr><td><code>code:prepare_loading(Module) -&gt; PreparedCode | error</code></td><td>准备加载新代码</td><td></td><td></td></tr><tr><td><code>code:finish_loading(PreparedList) -&gt; ok | {error, [{Module, What}]}</code></td><td>完成加载</td><td></td><td></td></tr><tr><td><code>code:which(Module) -&gt; Filename | non_existing | cover_compiled</code></td><td>获取模块所在路径</td><td></td><td></td></tr><tr><td><code>code:all_loaded() -&gt; [{Module, Filename}]</code></td><td>获取所有已加载模块</td><td></td><td></td></tr><tr><td><code>code:get_object_code(Module) -&gt; {Module, Binary, Filename} | error</code></td><td>获取模块对象代码</td><td></td><td></td></tr><tr><td><code>code:root_dir() -&gt; string()</code></td><td>获取系统根目录</td><td></td><td></td></tr><tr><td><code>code:lib_dir() -&gt; string()</code></td><td>获取库目录</td><td></td><td></td></tr><tr><td><code>code:lib_dir(Lib) -&gt; string() | {error, bad_name}</code></td><td>获取库目录</td><td></td><td></td></tr></tbody></table><h2 id="compile模块" tabindex="-1"><a class="header-anchor" href="#compile模块"><span>compile模块</span></a></h2><blockquote><p><code>compile</code> 模块是 Erlang 标准库中负责源代码编译的核心模块，它提供了从 Erlang 源代码到 BEAM 文件的各种编译功能。</p></blockquote><table><thead><tr><th>函数</th><th>功能</th><th>参数</th><th>返回值</th></tr></thead><tbody><tr><td><code>compile:file(File) -&gt; {ok, Module} | {ok, Module, Warnings} | error</code></td><td>编译文件到当前目录</td><td></td><td></td></tr><tr><td><code>compile:file(File, Options) -&gt; CompRet</code></td><td>编译文件到当前目录，带选项编译</td><td>% 常用选项： <br>% debug_info - 包含调试信息 <br>% binary - 返回二进制而不是生成.beam文件 <br>% {outdir, Dir} - 指定输出目录 <br>% report_errors/report_warnings - 显示错误/警告<br> % warnings_as_errors - 将警告视为错误</td><td></td></tr><tr><td><code>compile:forms(Forms) -&gt; CompRet</code><br><code> compile:forms(Forms, Options) -&gt; CompRet</code></td><td>,从二进制数据编译,Forms可以是Erlang抽象格式或Kernel格式</td><td></td><td></td></tr><tr><td><code>compile:files(Files) -&gt; [CompRet]</code><br><code> compile:files(Files, Options) -&gt; [CompRet]</code></td><td>编译多个文件</td><td></td><td></td></tr><tr><td><code>compile:env_compiler_options() -&gt; [Option]</code></td><td>获取编译选项</td><td></td><td></td></tr><tr><td><code>compile:env_compiler_options(Options) -&gt; true</code></td><td>设置编译选项</td><td></td><td></td></tr><tr><td><code>compile:format_error(ErrorDescriptor) -&gt; string()</code></td><td>格式化错误/警告输出</td><td></td><td></td></tr></tbody></table><h3 id="编译选项详解" tabindex="-1"><a class="header-anchor" href="#编译选项详解"><span>编译选项详解</span></a></h3><table><thead><tr><th style="text-align:left;">选项</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><code>debug_info</code></td><td style="text-align:left;">包含调试信息</td></tr><tr><td style="text-align:left;"><code>binary</code></td><td style="text-align:left;">返回二进制而不是写入文件</td></tr><tr><td style="text-align:left;"><code>verbose</code></td><td style="text-align:left;">显示详细编译信息</td></tr><tr><td style="text-align:left;"><code>report_errors</code></td><td style="text-align:left;">显示编译错误</td></tr><tr><td style="text-align:left;"><code>report_warnings</code></td><td style="text-align:left;">显示编译警告</td></tr><tr><td style="text-align:left;"><code>warnings_as_errors</code></td><td style="text-align:left;">将警告视为错误</td></tr><tr><td style="text-align:left;"><code>{outdir, Dir}</code></td><td style="text-align:left;">指定输出目录</td></tr><tr><td style="text-align:left;"><code>{i, Dir}</code></td><td style="text-align:left;">添加包含目录</td></tr><tr><td style="text-align:left;"><code>{d, Macro}</code></td><td style="text-align:left;">定义宏</td></tr><tr><td style="text-align:left;"><code>{d, Macro, Value}</code></td><td style="text-align:left;">定义带值的宏</td></tr><tr><td style="text-align:left;"><code>export_all</code></td><td style="text-align:left;">导出所有函数</td></tr><tr><td style="text-align:left;"><code>inline</code></td><td style="text-align:left;">启用函数内联</td></tr><tr><td style="text-align:left;"><code>optimize</code></td><td style="text-align:left;">启用优化</td></tr></tbody></table><h2 id="erlang-模块" tabindex="-1"><a class="header-anchor" href="#erlang-模块"><span>erlang 模块</span></a></h2><blockquote><p><code>erlang</code> 模块包含了许多基础的函数和操作符，是 Erlang 语言的核心组成部分。你不需要显式地引入它们，Erlang 虚拟机会自动加载并允许你调用它们。</p></blockquote><p><a href="https://www.erlang.org/doc/apps/erts/erlang.html#content" target="_blank" rel="noopener noreferrer">官方文档</a></p><h2 id="calendar模块" tabindex="-1"><a class="header-anchor" href="#calendar模块"><span>calendar模块</span></a></h2><blockquote><p>Erlang 的 <code>calendar</code> 模块提供了处理日期和时间的功能，包括公历(格里高利历)的计算和转换。</p></blockquote><table><thead><tr><th><strong>函数</strong></th><th><strong>功能</strong></th><th><strong>参数</strong></th><th><strong>返回值</strong></th></tr></thead><tbody><tr><td><code>calendar:local_time/0</code></td><td>获取本地时间(操作系统时区)</td><td></td><td><code>{{2023, 8, 15}, {14, 30, 15}}</code></td></tr><tr><td><code>calendar:universal_time/0</code></td><td>获取UTC时间</td><td></td><td><code>{{2023, 8, 15}, {6, 30, 15}}</code></td></tr><tr><td><code>calendar:datetime_to_gregorian_seconds/1</code></td><td>将日期时间转换为从公元1年1月1日开始的格里高利秒数</td><td><code>{{2023,1,1},{0,0,0}}</code></td><td>63713433600</td></tr><tr><td><code>calendar:gregorian_seconds_to_datetime/1</code></td><td>将格里高利秒数转换回日期时间</td><td>63713433600</td><td><code>{{2023,1,1},{0,0,0}}</code></td></tr><tr><td><code>calendar:day_of_the_week/3</code></td><td>计算某天是星期几(1=星期一,7=星期日)</td><td>2023, 8, 15</td><td>2 (星期二)</td></tr><tr><td><code>calendar:last_day_of_the_month/2</code></td><td>获取某月的最后一天</td><td>2023, 2</td><td>28</td></tr><tr><td><code>calendar:number_of_days_in_year/1</code></td><td>计算某年有多少天</td><td>2023</td><td>365</td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr></tbody></table><h2 id="os-模块" tabindex="-1"><a class="header-anchor" href="#os-模块"><span>os 模块</span></a></h2><blockquote><p><code>os</code> 模块是 Erlang 中提供的用于与操作系统交互的标准库。通过 <code>os</code> 模块，你可以执行一系列系统相关的操作，如文件和目录操作、环境变量处理、进程管理等。</p></blockquote><table><thead><tr><th><strong>函数</strong></th><th><strong>功能</strong></th><th><strong>参数</strong></th><th><strong>返回值</strong></th></tr></thead><tbody><tr><td><code>os:cmd/1</code></td><td>执行 shell 命令并返回其输出</td><td><code>Cmd</code>：要执行的 shell 命令（字符串或二进制）</td><td>返回命令的标准输出（字符串）。</td></tr><tr><td><code>os:cwd/0</code></td><td>获取当前工作目录</td><td>无</td><td>返回当前工作目录路径（字符串）。</td></tr><tr><td><code>os:change_cwd/1</code></td><td>改变当前工作目录</td><td><code>Dir</code>：目标目录（字符串）</td><td><code>true</code> 表示成功，<code>false</code> 表示失败。</td></tr><tr><td><code>os:make_dir/1</code></td><td>创建一个新目录</td><td><code>Dir</code>：要创建的目录路径（字符串）</td><td><code>true</code> 表示成功，<code>false</code> 表示失败。</td></tr><tr><td><code>os:del_dir/1</code></td><td>删除一个目录</td><td><code>Dir</code>：要删除的目录路径（字符串）</td><td><code>true</code> 表示成功，<code>false</code> 表示失败。</td></tr><tr><td><code>os:delete/1</code></td><td>删除文件</td><td><code>File</code>：文件路径（字符串）</td><td><code>true</code> 表示成功，<code>false</code> 表示失败。</td></tr><tr><td><code>os:getenv/1</code></td><td>获取环境变量的值</td><td><code>Var</code>：环境变量名（字符串）</td><td>返回环境变量的值（字符串），若未定义返回 <code>undefined</code>。</td></tr><tr><td><code>os:setenv/2</code></td><td>设置环境变量的值</td><td><code>Var</code>：环境变量名（字符串），<code>Value</code>：环境变量值（字符串）</td><td><code>true</code> 表示成功，<code>false</code> 表示失败。</td></tr><tr><td><code>os:unsetenv/1</code></td><td>删除环境变量</td><td><code>Var</code>：环境变量名（字符串）</td><td><code>true</code> 表示成功，<code>false</code> 表示失败。</td></tr><tr><td><code>os:pid/0</code></td><td>获取当前 Erlang 进程的操作系统 PID</td><td>无</td><td>返回当前进程的操作系统 PID（整数）。</td></tr><tr><td><code>os:type/0</code></td><td>获取当前操作系统的类型</td><td>无</td><td>返回操作系统类型（如 <code>unix</code> 或 <code>windows</code>）。</td></tr><tr><td><code>os:system/1</code></td><td>执行 shell 命令并返回执行状态</td><td><code>Cmd</code>：要执行的命令（字符串）</td><td>返回执行状态，<code>0</code> 表示成功，非 <code>0</code> 表示失败。</td></tr><tr><td><code>os:halt/0</code></td><td>终止 Erlang 虚拟机（VM）</td><td>无</td><td>无，直接终止 Erlang 虚拟机。</td></tr><tr><td><code>os:abort/0</code></td><td>终止当前 Erlang 进程</td><td>无</td><td>无，立即终止当前进程。</td></tr><tr><td><code>os:timestamp/0</code></td><td>获取当前时间戳</td><td>无</td><td>返回当前时间的时间戳，格式为 <code>{MegaSecs, Secs, MicroSecs}</code>（元组）。</td></tr><tr><td><code>os:version/0</code></td><td>获取当前 Erlang 版本信息</td><td>无</td><td>返回 Erlang 版本信息（如 <code>{major, minor, patch}</code>）。</td></tr></tbody></table><h2 id="re模块" tabindex="-1"><a class="header-anchor" href="#re模块"><span>re模块</span></a></h2><blockquote><p>正则表达式功能由 <code>re</code> 模块提供，<code>re</code> 模块允许我们使用正则表达式来匹配和处理字符串。</p></blockquote><table><thead><tr><th>函数</th><th>描述</th><th>参数示例</th><th>返回值示例</th></tr></thead><tbody><tr><td><code>re:run/2</code></td><td>检查字符串是否匹配给定的正则表达式</td><td><code>re:run(&quot;hello&quot;, &quot;h.*o&quot;)</code></td><td><code>{match, {0, 5}}</code> 或 <code>nomatch</code></td></tr><tr><td><code>re:run/3</code></td><td>检查字符串是否匹配正则表达式，并可以指定选项（如返回捕获组）</td><td><code>re:run(&quot;hello&quot;, &quot;(h.*o)&quot;, [{capture, all, list}])</code></td><td><code>{match, [[&quot;hello&quot;]]}</code> 或 <code>nomatch</code></td></tr><tr><td><code>re:split/2</code></td><td>使用正则表达式分割字符串</td><td><code>re:split(&quot;apple,orange,banana&quot;, &quot;,&quot;)</code></td><td><code>[&quot;apple&quot;, &quot;orange&quot;, &quot;banana&quot;]</code></td></tr><tr><td><code>re:split/3</code></td><td>使用正则表达式分割字符串并指定返回选项</td><td><code>re:split(&quot;apple,orange,banana&quot;, &quot;,&quot;, [{return, list}, {global, true}])</code></td><td><code>[&quot;apple&quot;, &quot;orange&quot;, &quot;banana&quot;]</code></td></tr><tr><td><code>re:replace/3</code></td><td>使用正则表达式替换字符串中的匹配部分</td><td><code>re:replace(&quot;The price is $100.&quot;, &quot;\\\\$100&quot;, &quot;$200&quot;, [{return, binary}])</code></td><td><code>&lt;&lt;&quot;The price is $200.&quot;&gt;&gt;</code></td></tr><tr><td><code>re:replace/4</code></td><td>使用正则表达式替换字符串中的匹配部分并指定选项（如全局替换）</td><td><code>re:replace(&quot;foo foo foo&quot;, &quot;foo&quot;, &quot;bar&quot;, [{global, true}])</code></td><td><code>&quot;bar bar bar&quot;</code></td></tr><tr><td><code>re:replace/4</code></td><td>使用正则表达式替换字符串中的匹配部分并指定返回类型（例如 list 或 binary）</td><td><code>re:replace(&quot;foo foo foo&quot;, &quot;foo&quot;, &quot;bar&quot;, [{global, true}, {return, list}])</code></td><td><code>[&quot;bar&quot;, &quot;bar&quot;, &quot;bar&quot;]</code></td></tr><tr><td><code>re:compile/1</code></td><td>编译一个正则表达式并返回编译后的结构体</td><td><code>re:compile(&quot;h.*o&quot;)</code></td><td><code>{ok, {compiled_regex}}</code></td></tr><tr><td><code>re:compile/2</code></td><td>编译一个正则表达式并指定选项</td><td><code>re:compile(&quot;h.*o&quot;, [{capture, all, list}])</code></td><td><code>{ok, {compiled_regex}}</code></td></tr><tr><td><code>re:info/1</code></td><td>获取编译后正则表达式的信息</td><td><code>re:info({compiled_regex})</code></td><td>信息字典</td></tr></tbody></table><h3 id="re-run-3" tabindex="-1"><a class="header-anchor" href="#re-run-3"><span>re:run/3</span></a></h3><blockquote><p>在字符串中执行正则表达式匹配操作。</p></blockquote><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">re</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Subject</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> RE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Options</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> MatchResult</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> | </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> ErrSpec</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong></p><ul><li><p><strong>Subject</strong>: 要匹配的字符串(二进制或列表形式)</p></li><li><p><strong>RE</strong>: 正则表达式(可以是字符串、预编译的正则表达式或{re_pattern,...}元组)</p></li><li><p><strong>Options</strong>: 可选参数列表</p></li><li><table><thead><tr><th><code>unicode</code></th><th>启用Unicode支持</th></tr></thead><tbody><tr><td><code>caseless</code></td><td>不区分大小写</td></tr><tr><td><code>dotall</code></td><td>让<code>.</code>匹配包括换行符在内的所有字符</td></tr><tr><td><code>multiline</code></td><td>多行模式</td></tr><tr><td><code>anchored</code></td><td>锚定模式</td></tr><tr><td><code>notempty</code></td><td>不允许空匹配</td></tr><tr><td><code>global</code></td><td>全局匹配(查找所有匹配)</td></tr><tr><td><code>notbol</code></td><td>不将字符串开始视为行开始</td></tr><tr><td><code>noteol</code></td><td>不将字符串结束视为行结束</td></tr><tr><td><code>{offset, N}</code></td><td>从位置N开始匹配</td></tr><tr><td><code>{capture, What}</code></td><td>控制捕获的内容</td></tr></tbody></table></li></ul><p><strong>返回值</strong></p><p>匹配成功返回包含匹配信息的元组，失败返回 <code>nomatch</code> 或 <code>{error, ErrSpec}</code>。</p><h3 id="正则表达式的基本语法" tabindex="-1"><a class="header-anchor" href="#正则表达式的基本语法"><span>正则表达式的基本语法</span></a></h3><p>Erlang 中的正则表达式遵循 <strong>PCRE（Perl Compatible Regular Expressions）</strong> 的语法，支持一些常见的正则表达式特性：</p><ul><li><strong>字符类</strong>： <ul><li><code>[abc]</code>：匹配字符 <code>a</code>、<code>b</code> 或 <code>c</code>。</li><li><code>[^abc]</code>：匹配除了 <code>a</code>、<code>b</code>、<code>c</code> 以外的任何字符。</li><li><code>[0-9]</code>：匹配任何数字。</li><li><code>[a-z]</code>：匹配任何小写字母。</li></ul></li><li><strong>量词</strong>： <ul><li><code>*</code>：匹配前一个字符 0 次或多次。</li><li><code>+</code>：匹配前一个字符 1 次或多次。</li><li><code>?</code>：匹配前一个字符 0 次或 1 次。</li><li><code>{n}</code>：匹配前一个字符恰好 <code>n</code> 次。</li><li><code>{n,}</code>：匹配前一个字符至少 <code>n</code> 次。</li><li><code>{n,m}</code>：匹配前一个字符至少 <code>n</code> 次，但不超过 <code>m</code> 次。</li></ul></li><li><strong>位置匹配</strong>： <ul><li><code>^</code>：匹配字符串的开始。</li><li><code>$</code>：匹配字符串的结束。</li></ul></li><li><strong>分组和捕获</strong>： <ul><li><code>()</code>：用来分组，如 <code>(abc)</code> 可以匹配 <code>abc</code>。</li><li><code>\\1</code>, <code>\\2</code>, ...：表示引用第 1、2 个分组的匹配内容。</li></ul></li><li><strong>其他常见的元字符</strong>： <ul><li><code>.</code>：匹配任意单个字符。</li><li><code>\\d</code>：匹配一个数字，相当于 <code>[0-9]</code>。</li><li><code>\\w</code>：匹配一个字母数字字符，相当于 <code>[a-zA-Z0-9_]</code>。</li><li><code>\\s</code>：匹配一个空白字符（如空格、制表符、换行等）。</li></ul></li></ul><h2 id="beam-disasm模块" tabindex="-1"><a class="header-anchor" href="#beam-disasm模块"><span><code>beam_disasm</code>模块</span></a></h2><blockquote><ul><li>将 BEAM 文件反汇编为可读的汇编指令</li><li>支持按函数或整个模块进行反汇编</li><li>提供标签和代码位置信息</li><li>支持调试信息映射（如果有）</li></ul></blockquote><table><thead><tr><th>函数</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td><code>beam_disasm:file(Filename) -&gt; {ok, {Module, Disassembly}} | {error, Reason}</code></td><td>反汇编整个 BEAM 文件</td><td><code>beam_disasm:file(&quot;module.beam&quot;).</code></td></tr><tr><td><code>beam_disasm:code_at(EntryPoint, Labels) -&gt; [Instruction]</code></td><td>获取指定位置的代码</td><td></td></tr><tr><td><code>beam_disasm:function(Filename, FunctionName) -&gt; {ok, Code} | {error, Reason}</code></td><td>反汇编特定函数</td><td><code>{ok, Code} = beam_disasm:function(&quot;module.beam&quot;, &#39;foo/2&#39;).</code></td></tr></tbody></table><h2 id="erl-syntax模块" tabindex="-1"><a class="header-anchor" href="#erl-syntax模块"><span><strong><code>erl_syntax</code>模块</strong></span></a></h2><blockquote><p>主要用于 <strong>Erlang 抽象语法树（AST）的构建和操作</strong>。它常用于代码生成、宏展开、静态分析等场景。</p><ul><li><strong>构建 AST</strong>：动态生成 Erlang 代码的语法树</li><li><strong>转换 AST</strong>：修改现有语法树（如变量替换、函数重命名）</li><li><strong>格式化输出</strong>：将 AST 转换为可读的 Erlang 代码</li><li><strong>模式匹配</strong>：检查语法树结构</li></ul></blockquote><h3 id="基础节点构造" tabindex="-1"><a class="header-anchor" href="#基础节点构造"><span>基础节点构造</span></a></h3><table><thead><tr><th style="text-align:left;">函数</th><th style="text-align:left;">说明</th><th style="text-align:left;">示例</th></tr></thead><tbody><tr><td style="text-align:left;"><code>atom(Name)</code></td><td style="text-align:left;">创建原子节点</td><td style="text-align:left;"><code>erl_syntax:atom(hello)</code> → <code>hello</code></td></tr><tr><td style="text-align:left;"><code>variable(Name)</code></td><td style="text-align:left;">创建变量节点</td><td style="text-align:left;"><code>erl_syntax:variable(&#39;X&#39;)</code> → <code>X</code></td></tr><tr><td style="text-align:left;"><code>integer(Value)</code></td><td style="text-align:left;">创建整型节点</td><td style="text-align:left;"><code>erl_syntax:integer(42)</code> → <code>42</code></td></tr><tr><td style="text-align:left;"><code>string(Value)</code></td><td style="text-align:left;">创建字符串节点</td><td style="text-align:left;"><code>erl_syntax:string(&quot;Erlang&quot;)</code> → <code>&quot;Erlang&quot;</code></td></tr><tr><td style="text-align:left;"><code>tuple(Elements)</code></td><td style="text-align:left;">创建元组节点</td><td style="text-align:left;"><code>erl_syntax:tuple([A, B])</code> → <code>{A, B}</code></td></tr><tr><td style="text-align:left;"><code>list(Elements)</code></td><td style="text-align:left;">创建列表节点</td><td style="text-align:left;"><code>erl_syntax:list([A, B])</code> → <code>[A, B]</code></td></tr><tr><td style="text-align:left;"><code>operator(Name)</code></td><td style="text-align:left;">创建操作符节点</td><td style="text-align:left;"><code>erl_syntax:operator(&#39;+&#39;)</code> → <code>+</code></td></tr></tbody></table><h3 id="函数与子句构造" tabindex="-1"><a class="header-anchor" href="#函数与子句构造"><span>函数与子句构造</span></a></h3><table><thead><tr><th style="text-align:left;">函数</th><th style="text-align:left;">说明</th><th style="text-align:left;">示例</th></tr></thead><tbody><tr><td style="text-align:left;"><code>function(Name, Clauses)</code></td><td style="text-align:left;">创建函数定义</td><td style="text-align:left;"><code>erl_syntax:function(atom(f), [Clause])</code> → <code>f() -&gt; ok.</code></td></tr><tr><td style="text-align:left;"><code>clause(Patterns, Guard, Body)</code></td><td style="text-align:left;">创建函数子句</td><td style="text-align:left;"><code>erl_syntax:clause([], none, [atom(ok)])</code> → <code>() -&gt; ok</code></td></tr><tr><td style="text-align:left;"><code>match_expr(Pattern, Expr)</code></td><td style="text-align:left;">创建匹配表达式</td><td style="text-align:left;"><code>erl_syntax:match_expr(X, 1)</code> → <code>X = 1</code></td></tr><tr><td style="text-align:left;"><code>arity_qualifier( Name,Arity)</code></td><td style="text-align:left;">创建函数元数限定符</td><td style="text-align:left;"><code>erl_syntax:arity_qualifier(atom(foo), integer(1))</code> → <code>foo/1</code></td></tr><tr><td style="text-align:left;"><code>attribute(Name,Content)</code></td><td style="text-align:left;">创建模块属性节点</td><td style="text-align:left;"><code>erl_syntax:attribute(atom(module), atom(foo))</code> → <code>-module(foo)</code></td></tr><tr><td style="text-align:left;"><code>form_list([erl_syntax:syntaxTree()])</code></td><td style="text-align:left;">将多个语法树组合成模块形式的代码结构</td><td style="text-align:left;"></td></tr></tbody></table><h3 id="ast操作与查询" tabindex="-1"><a class="header-anchor" href="#ast操作与查询"><span>AST操作与查询</span></a></h3><table><thead><tr><th style="text-align:left;">函数</th><th style="text-align:left;">说明</th><th style="text-align:left;">示例</th></tr></thead><tbody><tr><td style="text-align:left;"><code>subtrees(Tree)</code></td><td style="text-align:left;">获取所有子树</td><td style="text-align:left;"><code>erl_syntax:subtrees(Function)</code> → 返回函数体、参数等</td></tr><tr><td style="text-align:left;"><code>update_tree(Tree, Fun)</code></td><td style="text-align:left;">递归修改 AST</td><td style="text-align:left;">替换所有变量名</td></tr><tr><td style="text-align:left;"><code>is_leaf(Node)</code></td><td style="text-align:left;">检查是否为叶子节点</td><td style="text-align:left;"><code>erl_syntax:is_leaf(integer(1))</code> → <code>true</code></td></tr><tr><td style="text-align:left;"><code>type(Tree)</code></td><td style="text-align:left;">获取节点类型</td><td style="text-align:left;"><code>erl_syntax:type(variable(&#39;X&#39;))</code> → <code>variable</code></td></tr></tbody></table><h3 id="代码生成与转换" tabindex="-1"><a class="header-anchor" href="#代码生成与转换"><span>代码生成与转换</span></a></h3><table><thead><tr><th style="text-align:left;">函数</th><th style="text-align:left;">说明</th><th style="text-align:left;">示例</th></tr></thead><tbody><tr><td style="text-align:left;">\`revert(Forms</td><td style="text-align:left;">AST)\`</td><td style="text-align:left;">将<code>form</code>转化为<code>AST</code>或者将AST转化为Form</td></tr><tr><td style="text-align:left;"><code>form_list(Forms)</code></td><td style="text-align:left;">生成模块表单</td><td style="text-align:left;">用于构建完整模块</td></tr><tr><td style="text-align:left;"><code>abstract(Term)</code></td><td style="text-align:left;">Erlang 值 → AST</td><td style="text-align:left;"><code>erl_syntax:abstract([1,2])</code> → 列表语法树</td></tr></tbody></table><h3 id="实用工具" tabindex="-1"><a class="header-anchor" href="#实用工具"><span><strong>实用工具</strong></span></a></h3><table><thead><tr><th style="text-align:left;">函数</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><code>annotate(Tree, Annotations)</code></td><td style="text-align:left;">添加注释/行号</td></tr><tr><td style="text-align:left;"><code>get_ann(Tree)</code></td><td style="text-align:left;">获取注释信息</td></tr><tr><td style="text-align:left;"><code>copy_attrs(From, To)</code></td><td style="text-align:left;">复制元数据</td></tr></tbody></table><h2 id="erl-scan模块-词法分析器" tabindex="-1"><a class="header-anchor" href="#erl-scan模块-词法分析器"><span>erl_scan模块（词法分析器）</span></a></h2><blockquote><p><code>erl_scan</code> 是 Erlang/OTP 标准库中的 <strong>词法分析器（Lexer）模块</strong>，主要负责将 Erlang 源代码或代码片段解析为 <strong>词法标记（Tokens）</strong>，为后续的语法分析（如 <code>erl_parse</code>）提供基础</p></blockquote><table><thead><tr><th style="text-align:left;">函数签名</th><th style="text-align:left;">作用</th><th style="text-align:left;">示例</th></tr></thead><tbody><tr><td style="text-align:left;"><strong><code>erl_scan:string/1</code></strong></td><td style="text-align:left;">将字符串解析为Erlang词法标记（tokens）</td><td style="text-align:left;"><code>erl_scan:string(&quot;1 + 2.&quot;).</code> 输出： <code>{ok, [{integer,1,1}, {op,1,&#39;+&#39;}, {integer,1,2}, {dot,1}], 1}</code></td></tr><tr><td style="text-align:left;"><code>erl_scan:tokens/3</code></td><td style="text-align:left;">增量式解析字符流，支持分块处理</td><td style="text-align:left;"><code>Cont=erl_scan:tokens([], &quot;1+&quot;, 1).</code> 输出： <code>{more, {continuation, ...}}</code> 再调用： <code>erl_scan:tokens(Cont, &quot;2.&quot;, 1).</code> 输出： <code>{done, {ok, [{integer,1,1}, {op,1,&#39;+&#39;}, {integer,1,2}, {dot,1}], 1}, &quot;&quot;}</code></td></tr><tr><td style="text-align:left;"><strong><code>erl_scan:reserved_word/1</code></strong></td><td style="text-align:left;">检查原子是否为Erlang保留字</td><td style="text-align:left;"><code>erl_scan:reserved_word(&#39;case&#39;).</code> 输出：<code>true</code> <code>erl_scan:reserved_word(&#39;foo&#39;).</code> 输出：<code>false</code></td></tr><tr><td style="text-align:left;"><strong><code>erl_scan:format_error/1</code></strong></td><td style="text-align:left;">将错误描述转换为可读字符串</td><td style="text-align:left;"><code>erl_scan:format_error({illegal, &#39;#&#39;}).</code> 输出：<code>&quot;illegal character &#39;#&#39;&quot;</code></td></tr><tr><td style="text-align:left;"><strong><code>erl_scan:continuation_location/1</code></strong></td><td style="text-align:left;">获取增量解析的当前位置</td><td style="text-align:left;">结合<code>tokens/3</code>使用，获取中间状态的位置信息</td></tr></tbody></table><h3 id="关键说明" tabindex="-1"><a class="header-anchor" href="#关键说明"><span><strong>关键说明</strong></span></a></h3><ol><li><strong><code>string/1</code></strong><ul><li>输入字符串需符合Erlang词法规则（如以<code>.</code>结尾的完整表达式）。</li><li>返回的<code>Tokens</code>是三元组列表：<code>{TokenType, LineNumber, Value}</code>。</li></ul></li><li><strong><code>tokens/3</code></strong><ul><li>用于流式处理（如网络数据分块到达时）。</li><li><code>Continuation</code>为中间状态，<code>LeftoverChars</code>是未处理的剩余字符。</li></ul></li></ol><h3 id="示例" tabindex="-1"><a class="header-anchor" href="#示例"><span>示例</span></a></h3><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">% 1. 字符串解析</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Tokens</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> _</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> erl_scan</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">string</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">X = 1 + 2.</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">% 2. 检查保留字</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">case</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> erl_scan</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">reserved_word</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(&#39;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">X</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&#39;)</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> of</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> -&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">变量名不能是保留字</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> -&gt;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> proceed</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">end</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">% 3. 错误处理</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">case</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> erl_scan</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">string</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1#</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> of</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> ErrorInfo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> _</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> -&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">        io</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">format</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">错误: </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">~</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">s</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">~</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">n</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">erl_scan</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">format_error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ErrorInfo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)]);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Tokens</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> _</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> -&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        process_tokens</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Tokens</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">end</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="erl-parse模块-语法分析器" tabindex="-1"><a class="header-anchor" href="#erl-parse模块-语法分析器"><span>erl_parse模块(语法分析器)</span></a></h2><blockquote><p><code>erl_parse</code> 是 Erlang/OTP 标准库中的 <strong>语法分析器（Parser）模块</strong>，负责将词法分析器（如 <code>erl_scan</code>）生成的 <strong>词法标记（Tokens）</strong> 转换为 <strong>Forms）</strong></p></blockquote><table><thead><tr><th style="text-align:left;">函数签名</th><th style="text-align:left;">作用</th><th style="text-align:left;">示例</th></tr></thead><tbody><tr><td style="text-align:left;"><strong><code>erl_parse:parse_exprs/1</code></strong></td><td style="text-align:left;">解析表达式列表,也就是以.结束的语句</td><td style="text-align:left;"><code>erl_parse:parse_exprs([{integer,1,1}, {op,1,&#39;+&#39;}, {integer,1,2}, {dot,1}]).</code> 输出：<code>{ok, [{op, 1, &#39;+&#39;, {integer, 1, 1}, {integer, 1, 2}}]}</code></td></tr><tr><td style="text-align:left;"><strong><code>erl_parse:parse_form/1</code></strong></td><td style="text-align:left;">解析完整表单,（如函数定义，模块属性）</td><td style="text-align:left;"><code>erl_parse:parse_form([{atom,1,fact}, {&#39;(&#39;,1}, {var,1,&#39;N&#39;}, {&#39;)&#39;,1}, {&#39;-&gt;&#39;,1}, {var,1,&#39;N&#39;}, {op,1,&#39;*&#39;}, {atom,1,fact}, {&#39;(&#39;,1}, {var,1,&#39;N&#39;}, {op,1,&#39;-&#39;}, {integer,1,1}, {&#39;)&#39;,1}, {dot,1}]).</code> 输出函数定义的 AST</td></tr><tr><td style="text-align:left;"><strong><code>erl_parse:parse_term/1</code></strong></td><td style="text-align:left;">解析简单项式（如数字、原子）</td><td style="text-align:left;"><code>erl_parse:parse_term([{integer,1,42}, {dot,1}]).</code> 输出：<code>{ok, 42}</code></td></tr><tr><td style="text-align:left;"><strong><code>erl_parse:normalise/1</code></strong></td><td style="text-align:left;">规范化 AST（如展开宏）</td><td style="text-align:left;">通常在编译器内部使用</td></tr></tbody></table><h3 id="应用场景" tabindex="-1"><a class="header-anchor" href="#应用场景"><span>应用场景</span></a></h3><ul><li><p><strong>代码编译</strong> 编译器（如 <code>compile</code> 模块）使用 <code>erl_parse</code> 将源代码转换为 <code>Forms</code>，进一步生成字节码。</p><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Tokens</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> erl_scan</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">string</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">fact(0) -&gt; 1; fact(N) -&gt; N * fact(N-1).</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Forms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> erl_parse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">parse_form</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Tokens</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>动态代码求值</strong> 在运行时解析并执行字符串形式的代码（如 REPL 环境）。</p><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Tokens</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> _</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> erl_scan</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">string</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">lists:sum([1,2,3]).</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Forms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> erl_parse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">parse_exprs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Tokens</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Result</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> _</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> erl_eval</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">exprs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">AST</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [])</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.  </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">% Result = 6</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>宏展开</strong> 在预处理阶段解析宏定义和调用，生成扩展后的 Forms。</p></li><li><p><strong>代码生成工具</strong> 自定义工具（如代码生成器）通过操作 Forms 实现自动化代码修改。</p></li></ul><h2 id="form、ast" tabindex="-1"><a class="header-anchor" href="#form、ast"><span>Form、AST</span></a></h2><table><thead><tr><th style="text-align:left;"><strong>特性</strong></th><th style="text-align:left;"><strong>Forms</strong></th><th style="text-align:left;"><strong>AST</strong></th></tr></thead><tbody><tr><td style="text-align:left;"><strong>抽象层级</strong></td><td style="text-align:left;">更接近源码的中间表示（Erlang Parse Tree）</td><td style="text-align:left;">更高级的语法树（可能经过简化或标准化）</td></tr><tr><td style="text-align:left;"><strong>用途</strong></td><td style="text-align:left;">直接对应Erlang语法结构，用于编译中间步骤</td><td style="text-align:left;">通用语法树，适合跨语言或工具分析</td></tr><tr><td style="text-align:left;"><strong>数据结构</strong></td><td style="text-align:left;">嵌套元组（如 <code>{function, Line, Name, Arity, Clauses}</code>）</td><td style="text-align:left;">可能使用标准节点类型（如 <code>erl_syntax</code> 模块的记录）</td></tr><tr><td style="text-align:left;"><strong>处理阶段</strong></td><td style="text-align:left;">词法分析 → 语法分析 → Forms</td><td style="text-align:left;">Forms → 进一步抽象为AST</td></tr></tbody></table><table><thead><tr><th style="text-align:left;"><strong>场景</strong></th><th style="text-align:left;"><strong>推荐表示</strong></th><th style="text-align:left;"><strong>原因</strong></th></tr></thead><tbody><tr><td style="text-align:left;"><strong>编译Erlang代码</strong></td><td style="text-align:left;">Forms</td><td style="text-align:left;">编译器（如 <code>compile</code> 模块）直接处理 Forms。</td></tr><tr><td style="text-align:left;"><strong>代码静态分析</strong></td><td style="text-align:left;">AST</td><td style="text-align:left;">使用 <code>erl_syntax</code> 提供的高层API便于遍历和修改。</td></tr><tr><td style="text-align:left;"><strong>宏展开预处理</strong></td><td style="text-align:left;">Forms</td><td style="text-align:left;"><code>epp</code> 模块返回 Forms，包含宏展开后的原始语法结构。</td></tr><tr><td style="text-align:left;"><strong>跨工具通用处理</strong></td><td style="text-align:left;">AST</td><td style="text-align:left;">标准化结构（如通过 <code>erl_syntax</code>）兼容不同工具链。</td></tr></tbody></table><h3 id="form" tabindex="-1"><a class="header-anchor" href="#form"><span>Form</span></a></h3><blockquote><p>Forms 节点通常以 <strong>元组</strong> 形式表示，包含语法元素及其元数据（如行号）。</p><p>保留所有语法细节（如行号、变量名、原子字面量）</p></blockquote><p><strong>示例</strong>：解析 <code>1 + 2</code> 的 AST</p><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Tokens</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> _</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> erl_scan</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">string</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1 + 2.</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Form</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> erl_parse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">parse_exprs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Tokens</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">op</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &#39;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">+</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&#39;,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">integer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">},</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">integer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}}]}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">% 示例：函数定义</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">function</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> foo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">clause</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">var</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &#39;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">X</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&#39;}],</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [],</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">call</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">atom</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> io</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">},</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">atom</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> format</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">},</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">string</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">X=</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">~</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">p</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">~</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">n</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">},</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">var</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &#39;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">X</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&#39;}]}</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    ]}</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">]}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>节点格式</strong>：<code>{op, Line, Operator, Left, Right}</code><ul><li><code>Line</code>：代码行号</li><li><code>Operator</code>：操作符（如 <code>&#39;+&#39;</code>）</li><li><code>Left</code>/<code>Right</code>：左/右子表达式</li></ul></li></ul><h3 id="ast" tabindex="-1"><a class="header-anchor" href="#ast"><span>AST</span></a></h3><blockquote><p>更结构化，适合模式匹配和代码生成。</p></blockquote><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">% 使用 erl_syntax 构造的AST</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">erl_syntax</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">function</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">    erl_syntax</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">atom</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">foo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    [</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">erl_syntax</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">clause</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        [</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">erl_syntax</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">variable</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(&#39;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">X</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&#39;)],</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">        none</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        [</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">erl_syntax</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">application</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">            erl_syntax</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">atom</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">io</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">            erl_syntax</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">atom</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">format</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            [</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">erl_syntax</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">string</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">X=</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">~</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">p</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">~</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">n</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> erl_syntax</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">variable</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(&#39;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">X</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&#39;)]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        )]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    )]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="erl-eval模块" tabindex="-1"><a class="header-anchor" href="#erl-eval模块"><span>erl_eval模块</span></a></h2><blockquote><p>是 Erlang/OTP 的标准库模块，用于 <strong>动态求值（Evaluation）</strong> 由 <code>erl_parse</code> 生成的抽象语法树（AST）。它是 Erlang 解释器的核心组件，常用于 REPL 环境、动态代码执行和脚本解析。</p></blockquote><table><thead><tr><th>函数</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td><code>exprs/2和expr/3</code></td><td>求值一组表达式，返回结果和更新后的变量绑定。</td><td></td></tr><tr><td><code>bindings/1</code></td><td>获取表达式中未绑定的变量名列表。</td><td>erl_eval:bindings([{var, 1, &#39;X&#39;}, {op, 1, &#39;=&#39;, {var, 1, &#39;X&#39;}, {integer, 1, 1}}]). 返回: [&#39;X&#39;]</td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h3 id="exprs-3" tabindex="-1"><a class="header-anchor" href="#exprs-3"><span>exprs/3</span></a></h3><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">expr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Expr</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Bindings</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">LocalFuncHandler</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> NewBindings</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> | </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Reason</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong></p><ul><li><code>Expr</code><ul><li>AST 节点</li><li>由 <code>erl_parse</code> 生成的单个表达式抽象语法树（如 <code>{op, 1, &#39;+&#39;, {integer,1,1}, {integer,1,2}}</code>）。</li></ul></li><li><code>Bindings</code><ul><li><code> [{VarName, Value}]</code></li><li>变量绑定环境（初始可为空列表 <code>[]</code>）。</li></ul></li><li><code>LocalFuncHandler</code><ul><li>函数（可选）</li><li>自定义函数解析逻辑，处理未定义的局部函数调用（如动态生成的函数）</li></ul></li></ul><p><strong>返回值</strong></p><ul><li><code>{value, Value, NewBindings} </code> 求值成功，返回结果 <code>Value</code> 和更新后的变量绑定 <code>NewBindings</code></li><li><code>{error, Reason} </code> 求值失败，返回错误原因（如 <code>unbound_var</code>、<code>badmatch</code>）。</li></ul><h3 id="应用场景-1" tabindex="-1"><a class="header-anchor" href="#应用场景-1"><span>应用场景</span></a></h3><ul><li><p><strong>Erlang Shell（REPL）</strong> Shell 输入的表达式的实时求值依赖 <code>erl_eval</code>。</p><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Tokens</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> _</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> erl_scan</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">string</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1 + 2.</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> AST</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> erl_parse</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">parse_exprs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Tokens</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Result</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> _</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> erl_eval</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">exprs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">AST</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [])</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Result</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>动态配置加载</strong> 解析并执行配置文件中的 Erlang 代码。</p><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Config</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">consult</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">config.erl</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,  </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">% 文件内容: {timeout, 30}.</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Timeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> _</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> erl_eval</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">expr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Config</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [])</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>脚本解释器</strong> 实现自定义脚本语言的运行时。</p></li></ul><h2 id="int模块" tabindex="-1"><a class="header-anchor" href="#int模块"><span>int模块</span></a></h2><blockquote><p><strong>int</strong> 是 Erlang 的标准调试器模块，提供了一系列强大的调试功能</p></blockquote><table><thead><tr><th>函数</th><th>描述</th><th>参数</th><th>返回值</th></tr></thead><tbody><tr><td><strong>调试器控制函数</strong></td><td></td><td></td><td></td></tr><tr><td><code>start() -&gt; {ok, Pid} | {error, Reason}</code></td><td><strong>启动调试器</strong></td><td></td><td><code>{ok, &lt;0.123.0&gt;}</code></td></tr><tr><td><code>start(Options) -&gt; {ok, Pid} | {error, Reason}</code></td><td><strong>启动调试器</strong></td><td></td><td><code>{ok, &lt;0.123.0&gt;}</code></td></tr><tr><td><code>stop() -&gt; ok</code></td><td><strong>停止调试器</strong></td><td></td><td></td></tr><tr><td><strong>模块管理函数</strong></td><td></td><td></td><td></td></tr><tr><td><code>nn(Module | File) -&gt; ok | error</code></td><td><strong>加载模块进行调试</strong></td><td>\`my_module</td><td>&quot;src/my_module.erl&quot;\`</td></tr><tr><td><code>interpreted() -&gt; [Module]</code></td><td><strong>获取所有已调试的模块列表</strong></td><td></td><td><code>[my_module, other_module]</code></td></tr><tr><td><strong>断点管理函数</strong></td><td></td><td></td><td></td></tr><tr><td><code>break(Module, Line) -&gt; ok | error</code></td><td><strong>在指定行设置断点</strong></td><td></td><td></td></tr><tr><td><code>break_in(Module, Function, Arity) -&gt; ok | error</code></td><td><strong>在函数入口设置断点</strong></td><td></td><td></td></tr><tr><td><code>all_breaks() -&gt; [{Module, Line, Status, Trigger, Conditions}]</code></td><td><strong>获取所有断点信息</strong></td><td></td><td><code>[{my_module,25,true,0,[]}, {my_module,30,false,0,[]}]</code></td></tr><tr><td><code>enable_break(Module, Line) -&gt; ok | error</code></td><td><strong>启用断点</strong></td><td></td><td></td></tr><tr><td><code>disable_break(Module, Line) -&gt; ok </code></td><td><strong>禁用断点</strong></td><td></td><td></td></tr><tr><td><code>delete_break(Module, Line) -&gt; ok | error</code></td><td><strong>删除断点</strong></td><td></td><td></td></tr><tr><td><strong>进程管理函数</strong></td><td></td><td></td><td></td></tr><tr><td><code>snapshot() -&gt; [{Pid, InitialCall, Status, Info}]</code></td><td><strong>获取被调试进程快照</strong></td><td></td><td><code>[{&lt;0.45.0&gt;,{my_module,init,1},break,...}]</code></td></tr><tr><td><code>attach(Pid) -&gt; ok | error</code></td><td><strong>附加到进程进行调试</strong></td><td></td><td></td></tr><tr><td><code>detach(Pid) -&gt; ok | error</code></td><td><strong>从进程分离</strong></td><td></td><td></td></tr><tr><td><code>attached() -&gt; [Pid]</code></td><td><strong>获取所有已附加的进程列表</strong></td><td></td><td></td></tr><tr><td><strong>自动附加函数</strong></td><td></td><td></td><td></td></tr><tr><td><code>auto_attach() -&gt; {Flag, Functions}</code></td><td><strong>获取当前自动附加设置</strong></td><td></td><td><code>{true, [{break,{debugger,auto_attach,[]}}]}</code></td></tr><tr><td><code>auto_attach(Flag, Functions) -&gt; ok</code></td><td><strong>设置自动附加行为</strong></td><td><strong>Flag</strong> <br>true % 启用自动附加功能<br> false % 禁用自动附加功能<br> <strong>Functions 参数</strong><br>[{EventType, {Module, Function}}] % 最常见形式<br> [{EventType, {Module, Function, Args}}] % 带额外参数 {EventType, {Module, Function}} % 单个事件类型<br></td><td><code>{init, {my_debug, on_init}}</code><br><strong>触发时机</strong>：当新进程被创建时<br><strong>使用场景</strong>：监控所有新创建的进程<br><code>{break, {my_debug, on_break}}</code><br><strong>触发时机</strong>：当进程执行到断点时<br><strong>使用场景</strong>：断点调试时自动附加</td></tr><tr><td><strong>执行控制函数</strong></td><td></td><td></td><td></td></tr><tr><td><code>step(Pid) -&gt; ok | error</code></td><td><strong>单步步入</strong></td><td>pid一般为附加的调试窗口</td><td></td></tr><tr><td><code>next(Pid) -&gt; ok | error</code></td><td><strong>单步步过</strong></td><td></td><td></td></tr><tr><td><code>continue(Pid) -&gt; ok | error</code></td><td><strong>继续执行</strong></td><td></td><td></td></tr><tr><td><strong>堆栈和变量函数</strong></td><td></td><td></td><td></td></tr><tr><td><code>stack_trace(Pid) -&gt; {ok, Stack} | {error, Reason}</code></td><td><strong>获取进程堆栈跟踪</strong></td><td></td><td><code>[{1,{my_module,func,1}}, {2,{other_module,call,2}}]</code></td></tr><tr><td><code>bindings(Pid, StackFrame) -&gt; {ok, Bindings} | {error, Reason}</code></td><td><strong>获取指定堆栈帧的变量绑定</strong></td><td></td><td><code>[{X,10}, {Y,20}, {Result,30}]</code></td></tr><tr><td><strong>元数据操作函数</strong></td><td></td><td></td><td></td></tr><tr><td><code>meta(MetaPid, Command, Args) -&gt; Result</code></td><td><strong>通过元进程执行调试命令</strong></td><td>% 示例<br><code>{ok, MetaPid} = dbg_iserver:safe_call({get_meta, Pid}),</code><br><code>Backtrace = int:meta(MetaPid, backtrace, all),</code><br><code> Bindings = int:meta(MetaPid, bindings, 1).</code></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr></tbody></table><h3 id="示例-1" tabindex="-1"><a class="header-anchor" href="#示例-1"><span>示例</span></a></h3><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">%% 完整的调试会话示例</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">start_debug_session</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    % 1. 启动调试器</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> _</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> int</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    % 2. 加载模块</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    ok</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> int</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nn</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">my_app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    ok</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> int</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nn</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">my_utils</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    % 3. 设置断点</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    ok</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> int</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">break</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">my_app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 15</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    ok</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> int</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">break_in</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">my_app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> process_data</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    % 4. 配置自动附加</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    ok</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> int</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">auto_attach</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">init</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">debugger</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> auto_attach</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}},</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">break</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">debugger</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> auto_attach</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}}</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    ]),</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    % 5. 查看当前状态</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    Mods</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> int</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">interpreted</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">    io</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">format</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Debugging modules: </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">~</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">p</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">~</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">n</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Mods</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]),</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    Breaks</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> int</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">all_breaks</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">    io</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">format</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Breakpoints: </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">~</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">p</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">~</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">n</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Breaks</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]),</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    % 6. 启动被调试的应用</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    Pid</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> spawn</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">fun</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -&gt;</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> my_app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> end</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    % 7. 稍后查看进程状态</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">    timer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sleep</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    Snapshot</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> int</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">snapshot</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">    io</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">format</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Process snapshot: </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">~</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">p</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">~</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">n</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Snapshot</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]),</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    % 8. 清理</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    ok</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> int</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stop</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="inet-模块" tabindex="-1"><a class="header-anchor" href="#inet-模块"><span>inet 模块</span></a></h2><blockquote><p><code>inet</code> 模块是 Erlang 中用于与网络相关的功能，主要提供了对 IP 地址、网络协议、端口等的支持。它包含了多个用于处理 IP 地址、套接字（sockets）、网络协议等的函数。</p></blockquote><p>以下是 <code>inet</code> 模块的一些常用方法，以及它们的说明和参数</p><table><thead><tr><th><strong>函数</strong></th><th><strong>描述</strong></th><th><strong>参数</strong></th><th><strong>返回值</strong></th></tr></thead><tbody><tr><td><code>inet:parse_address/1</code></td><td>解析一个 IP 地址（字符串）并返回其二进制表示。</td><td><code>Address :: string()</code> (如 &quot;192.168.0.1&quot;)</td><td><code>Result :: {ok, IP}</code> 或 <code>{error, reason}</code>，其中 <code>IP</code> 是二进制格式的 IP 地址</td></tr><tr><td><code>inet:parse_address/2</code></td><td>解析一个 IP 地址（字符串）并返回其二进制表示，支持 IPv6。</td><td><code>Address :: string()</code>, <code>Version :: integer()</code> (1 - IPv4, 6 - IPv6)</td><td><code>Result :: {ok, IP}</code> 或 <code>{error, reason}</code></td></tr><tr><td><code>inet:inet_ntoa/1</code></td><td>将二进制格式的 IP 地址转换为字符串表示。</td><td><code>IP :: binary()</code> (例如，二进制格式的 IP 地址)</td><td><code>Address :: string()</code> (返回的 IP 地址字符串)</td></tr><tr><td><code>inet:inet_ntoa/2</code></td><td>将二进制格式的 IP 地址转换为字符串，支持 IPv6。</td><td><code>IP :: binary()</code>, <code>Version :: integer()</code> (1 - IPv4, 6 - IPv6)</td><td><code>Address :: string()</code> (返回的 IP 地址字符串)</td></tr><tr><td><code>inet:gethostbyname/1</code></td><td>根据域名获取主机信息。</td><td><code>HostName :: string()</code> (主机名或域名)</td><td><code>{ok, {hostname, IPList}}</code> 或 <code>{error, reason}</code>，其中 <code>IPList</code> 是主机的 IP 地址列表</td></tr><tr><td><code>inet:gethostbyname/2</code></td><td>获取域名的 IP 地址信息，支持 IPv6。</td><td><code>HostName :: string()</code>, <code>Family :: inet</code> (IPv4) 或 <code>inet6</code> (IPv6)</td><td><code>{ok, {hostname, IPList}}</code> 或 <code>{error, reason}</code></td></tr><tr><td><code>inet:resolve/2</code></td><td>解析一个主机名并返回 IP 地址，支持 IPv6 和 IPv4。</td><td><code>HostName :: string()</code>, \`Family :: inet</td><td>inet6\`</td></tr><tr><td><code>inet:socket/3</code></td><td>创建一个套接字（Socket）。</td><td><code>Domain :: atom()</code>, <code>Type :: atom()</code>, <code>Protocol :: atom()</code></td><td><code>Socket :: socket()</code>，返回一个套接字，如果失败，则返回 <code>{error, Reason}</code></td></tr><tr><td><code>inet:close/1</code></td><td>关闭一个已打开的套接字。</td><td><code>Socket :: socket()</code> (一个已打开的套接字)</td><td><code>ok</code> 或 <code>{error, Reason}</code></td></tr><tr><td><code>inet:setopts/2</code></td><td>设置套接字的选项。</td><td><code>Socket :: socket()</code>, <code>Options :: [option()]</code></td><td><code>ok</code> 或 <code>{error, Reason}</code></td></tr><tr><td><code>inet:getopts/1</code></td><td>获取套接字的选项。</td><td><code>Socket :: socket()</code> (已打开的套接字)</td><td><code>{ok, Options}</code> 或 <code>{error, Reason}</code></td></tr><tr><td><code>inet:setopts/3</code></td><td>设置套接字的选项，指定特定的套接字选项。</td><td><code>Socket :: socket()</code>, <code>Option :: option()</code>, <code>Value :: term()</code></td><td><code>ok</code> 或 <code>{error, Reason}</code></td></tr><tr><td><code>inet:ip/1</code></td><td>获取指定域名的ip。</td><td>域名::atom()\`</td><td><code>IPList :: [string()]</code>，本机的 IP 地址列表</td></tr><tr><td><code>inet:getifaddrs/0</code></td><td>获取本机的所有网络接口的 IP 地址。</td><td>无</td><td><code>{ok, IfAddrList}</code>，返回接口的 IP 地址列表（每个接口包含 IP 地址、子网掩码等信息）</td></tr><tr><td><code>inet:gethostname/0</code></td><td>获取本机的主机名。</td><td>无</td><td><code>{ok, HostName}</code>，返回本机的主机名</td></tr><tr><td><code>inet:gethostname/1</code></td><td>获取主机名或主机信息。</td><td><code>Family :: inet</code></td><td>inet6\` (指定 IPv4 或 IPv6)</td></tr><tr><td><code>inet:resolve/3</code></td><td>解析给定的主机名，返回指定地址族（IPv4 或 IPv6）的 IP 地址。</td><td><code>HostName :: string()</code>, <code>Family :: atom()</code>, <code>Timeout :: integer()</code></td><td><code>{ok, IP}</code> 或 <code>{error, Reason}</code></td></tr><tr><td><code>inet:peername/1</code></td><td>获取与某个已连接套接字（socket）关联的远程主机的信息，通常用于 TCP 连接</td><td><code>Socket :: socket()</code></td><td><code>{ok, {Address, Port}}</code> 或 <code>{error, Reason}</code></td></tr></tbody></table><h2 id="io-模块" tabindex="-1"><a class="header-anchor" href="#io-模块"><span>io 模块</span></a></h2><p>在 Erlang 中，<code>io</code> 模块提供了一系列函数，用于输入和输出（I/O）操作。它是与用户交互、文件操作、输出日志等任务相关的重要模块。</p><p>以下是 <code>io</code> 模块的一些常用功能：</p><table><thead><tr><th><strong>函数名称</strong></th><th><strong>功能说明</strong></th><th><strong>示例</strong></th></tr></thead><tbody><tr><td><code>io:format(Format, Arguments)</code></td><td>格式化输出，类似于 <code>printf</code>，可以打印格式化字符串。</td><td><code>io:format(&quot;Hello, ~s!&quot;, [&quot;World&quot;])</code> 结果为 <code>Hello, World!</code></td></tr><tr><td><code>io:fwrite(Format, Arguments)</code></td><td>格式化输出到标准输出，类似于 <code>printf</code>，使用与 <code>io:format/2</code> 类似的格式。</td><td><code>io:fwrite(&quot;Hello ~w~n&quot;, [123])</code> 结果为 <code>Hello 123</code></td></tr><tr><td><code>io:write(Data)</code></td><td>输出一个术语，不会进行格式化，只是原样输出给定的数据。</td><td><code>io:write(&quot;Hello&quot;)</code> 结果为 <code>Hello</code></td></tr><tr><td><code>io:nl()</code></td><td>输出一个换行符，相当于打印一个新的行。</td><td><code>io:nl()</code> 结果为换行</td></tr><tr><td><code>io:get_line(Prompt)</code></td><td>从标准输入获取一行用户输入，返回一个字符串。</td><td><code>io:get_line(&quot;Enter your name: &quot;)</code> 输入 <code>Alice</code> 返回 <code>&quot;Alice\\n&quot;</code></td></tr><tr><td><code>io:read(Type)</code></td><td>从标准输入读取数据，根据指定的类型（如整数、浮点数、字符串等）返回数据。</td><td><code>io:read(integer)</code> 输入 <code>42</code> 返回 <code>42</code></td></tr><tr><td><code>io:get_chars(Prompt, N)</code></td><td>从标准输入读取 <code>N</code> 个字符，返回读取的字符。</td><td><code>io:get_chars(&quot;Enter input: &quot;, 5)</code> 输入 <code>ABCDE</code> 返回 <code>&quot;ABCDE&quot;</code></td></tr><tr><td><code>io:scan()</code></td><td>从标准输入读取一行数据并返回该行的内容，读取到的数据会解析为 Erlang 术语。</td><td><code>io:scan()</code> 输入 <code>{1, 2}</code> 返回 <code>{1, 2}</code></td></tr><tr><td><code>io:format/2</code></td><td>格式化输出，类似于 <code>printf</code>，但不会自动换行。</td><td><code>io:format(&quot;Hello, ~s&quot;, [&quot;World&quot;])</code> 结果为 <code>Hello, World</code></td></tr><tr><td><code>io:position()</code></td><td>获取当前输出流的位置（指针）。该函数通常用于文件输出流。</td><td><code>io:position()</code> 返回当前输出位置。</td></tr><tr><td><code>io:flush()</code></td><td>将缓冲区中的数据强制输出到屏幕，通常用于实时输出缓冲的情况。</td><td><code>io:flush()</code></td></tr><tr><td><code>io:open(FileName)</code></td><td>打开一个文件用于读取或写入。返回文件句柄。</td><td><code>io:open(&quot;file.txt&quot;)</code></td></tr><tr><td><code>io:close(Stream)</code></td><td>关闭文件流或标准流。</td><td><code>io:close(FileStream)</code></td></tr></tbody></table><h3 id="fwrite-函数" tabindex="-1"><a class="header-anchor" href="#fwrite-函数"><span><code>fwrite</code> 函数</span></a></h3><blockquote><p><code>io:fwrite/2</code> 是一个用来格式化输出的函数, 可以将格式化的字符串输出到控制台或其他输出设备</p></blockquote><h4 id="函数签名" tabindex="-1"><a class="header-anchor" href="#函数签名"><span>函数签名</span></a></h4><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">io</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">fwrite</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Format</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Arguments</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p><strong><code>Format</code></strong>: 这是一个格式化字符串，用来指定输出的内容和格式。</p></li><li><p><strong><code>Arguments</code></strong>: 这是一个包含值的<span style="color:#FF0000;">列表</span>，将会按照 <code>Format</code> 字符串中指定的格式输出。</p></li></ul><h4 id="格式化字符串" tabindex="-1"><a class="header-anchor" href="#格式化字符串"><span>格式化字符串</span></a></h4><blockquote><p><code>Format</code> 字符串中的格式符类似于 C 语言中的 <code>printf</code>，它可以包含格式化标识符，用来指定如何输出后面的参数</p></blockquote><p>常见的格式化标识符有：</p><ul><li><strong><code>~w</code></strong>: 打印一个 <strong>Erlang 术语</strong>（例如整数、元组、列表等）。</li><li><strong><code>~s</code></strong>: 打印一个 <strong>字符串</strong>。 <ul><li><code>~-10s</code> : 表示输出一个宽度为 10 的字符串，且左对齐。</li></ul></li><li><strong><code>~p</code></strong>: 打印一个 <strong>Erlang 术语</strong>，并且包括该术语的结构。</li><li><strong><code>~n</code></strong>: 插入一个 <strong>换行符</strong>。</li><li><strong><code>~d</code></strong>: 打印一个 <strong>整数</strong>（以十进制显示）。 <ul><li><code>~6d</code>: 表示输出一个最小宽度为 6 的十进制整数，数字前面会填充空格。</li></ul></li><li><code>~f</code>: 用于输出浮点数 <ul><li><code>~.2f</code>: 保留小数点后 2 位。</li></ul></li></ul><p>示例</p><p>输出一个整数</p><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">io</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">fwrite</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">The number is: </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">~</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">d</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">~</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">n</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">42</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">])</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">% 输出 The number is: 42</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="file-模块" tabindex="-1"><a class="header-anchor" href="#file-模块"><span>file 模块</span></a></h2><p>在 Erlang 中，文件操作通常通过 <code>file</code> 模块来进行。<code>file</code> 模块提供了许多函数，用于读写文件、文件的操作、文件状态检查等。</p><p>以下是一些常用的 <code>file</code> 模块函数及其说明。</p><table><thead><tr><th><strong>函数名称</strong></th><th><strong>功能说明</strong></th><th><strong>示例</strong></th></tr></thead><tbody><tr><td><code>file:open/2</code></td><td>打开文件并返回文件句柄。</td><td><code>file:open(&quot;test.txt&quot;, [read])</code></td></tr><tr><td><code>file:read/2</code></td><td>从文件中读取内容，返回文件中的内容和剩余部分。</td><td><code>{ok, Content} = file:read(FileHandle)</code></td></tr><tr><td><code>file:read_line/1</code></td><td>读取文件中的一行。</td><td><code>file:read_line(FileHandle)</code></td></tr><tr><td><code>file:write/2</code></td><td>向文件中写入数据。</td><td><code>file:write(FileHandle, &quot;Hello, World!&quot;)</code></td></tr><tr><td><code>file:close/1</code></td><td>关闭文件句柄。</td><td><code>file:close(FileHandle)</code></td></tr><tr><td><code>file:delete/1</code></td><td>删除指定的文件。</td><td><code>file:delete(&quot;test.txt&quot;)</code></td></tr><tr><td><code>file:rename/2</code></td><td>重命名文件。</td><td><code>file:rename(&quot;old_name.txt&quot;, &quot;new_name.txt&quot;)</code></td></tr><tr><td><code>file:make_dir/1</code></td><td>创建一个新的目录。</td><td><code>file:make_dir(&quot;new_dir&quot;)</code></td></tr><tr><td><code>file:make_dir/2</code></td><td>创建目录并设置权限。</td><td><code>file:make_dir(&quot;new_dir&quot;, [{mode, 755}])</code></td></tr><tr><td><code>file:list_dir/1</code></td><td>列出目录中所有文件和子目录。</td><td><code>file:list_dir(&quot;some_dir&quot;)</code></td></tr><tr><td><code>file:read_file/1</code></td><td>读取文件的全部内容。</td><td><code>{ok, Content} = file:read_file(&quot;test.txt&quot;)</code></td></tr><tr><td><code>file:write_file/2</code></td><td>写入文件并覆盖原内容。</td><td><code>file:write_file(&quot;test.txt&quot;, &quot;New Content&quot;)</code></td></tr><tr><td><code>file:write_file/3</code></td><td>写入文件并指定追加模式。</td><td><code>file:write_file(&quot;test.txt&quot;, &quot;Append Content&quot;, [append])</code></td></tr><tr><td><code>file:sync/1</code></td><td>将文件缓冲区中的数据同步到磁盘。</td><td><code>file:sync(FileHandle)</code></td></tr><tr><td><code>file:copy/2</code></td><td>复制文件到指定位置。</td><td><code>file:copy(&quot;source.txt&quot;, &quot;destination.txt&quot;)</code></td></tr></tbody></table><h3 id="file-open-2" tabindex="-1"><a class="header-anchor" href="#file-open-2"><span><code>file:open/2</code></span></a></h3><blockquote><p>打开指定路径的文件并返回一个文件句柄（<code>FileHandle</code>），供后续的读写操作使用。</p></blockquote><h4 id="签名" tabindex="-1"><a class="header-anchor" href="#签名"><span>签名</span></a></h4><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">open</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Path</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> string</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Modes</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">atom</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()])</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> FileHandle</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> pid</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()}</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> | </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Reason</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> term</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()}</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><span style="color:#00FF00;">参数：</span></p><ul><li><code>Path</code>：文件的路径，类型为 <code>string()</code>。</li><li><code>Modes</code>：文件模式列表，类型为 <code>list(atom())</code>，常见模式有： <ul><li><code>read</code>：只读模式。</li><li><code>write</code>：只写模式（文件存在时会覆盖）。</li><li><code>append</code>：追加模式。</li><li><code>binary</code>：二进制模式。</li></ul></li></ul><p><span style="color:#00FF00;">返回值：</span></p><ul><li><p><code>{ok, FileHandle}</code>：文件打开成功，返回文件句柄 <code>FileHandle</code>，类型为 <code>pid()</code>。</p></li><li><p><code>{error, Reason}</code>：文件打开失败，<code>Reason</code> 是失败的具体原因，类型为 <code>term()</code>。</p></li></ul><h4 id="示例-2" tabindex="-1"><a class="header-anchor" href="#示例-2"><span>示例</span></a></h4><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> FileHandle</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">open</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">example.txt</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">read</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">])</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="file-read-2" tabindex="-1"><a class="header-anchor" href="#file-read-2"><span><code>file:read/2</code></span></a></h3><blockquote><p>从文件中读取指定长度的字节数据，返回数据作为二进制。</p></blockquote><h4 id="签名-1" tabindex="-1"><a class="header-anchor" href="#签名-1"><span>签名</span></a></h4><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">read</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">FileHandle</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> pid</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Length</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> non_neg_integer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">())</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> BinaryData</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> binary</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()}</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> | </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">eof</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> []}</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> | </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Reason</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> term</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()}</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><span style="color:#00FF00;">参数</span></p><ul><li><p><code>FileHandle</code>：文件句柄，类型为 <code>pid()</code>。</p></li><li><p><code>Length</code>：要读取的字节数，类型为 <code>non_neg_integer()</code>（非负整数）。</p></li></ul><p><span style="color:#00FF00;">返回值</span></p><ul><li><p><code>{ok, BinaryData}</code>：成功读取了字节数为 <code>Length</code> 的二进制数据。</p></li><li><p><code>{eof, []}</code>：已到文件结尾，无法读取更多数据。</p></li><li><p><code>{error, Reason}</code>：发生错误，<code>Reason</code> 是错误的描述。</p></li></ul><h4 id="示例-3" tabindex="-1"><a class="header-anchor" href="#示例-3"><span>示例</span></a></h4><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Data</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">read</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">FileHandle</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1024</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-file-read-line-1" tabindex="-1"><a class="header-anchor" href="#_3-file-read-line-1"><span>3. <code>file:read_line/1</code></span></a></h3><blockquote><p>从文件中读取一行数据，包括换行符。</p></blockquote><h4 id="签名-2" tabindex="-1"><a class="header-anchor" href="#签名-2"><span>签名</span></a></h4><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">read_line</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">FileHandle</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> pid</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">())</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Line</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> binary</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">string</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()}</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> | </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">eof</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> []}</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> | </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Reason</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> term</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()}</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><span style="color:#00FF00;">参数：</span></p><ul><li><code>FileHandle</code>：文件句柄，类型为 <code>pid()</code>。</li></ul><p><span style="color:#00FF00;">返回值：</span></p><ul><li><code>{ok, Line}</code>：成功读取一行数据，<code>Line</code> 是二进制数据。</li><li><code>{eof, []}</code>：到达文件末尾，返回空列表。</li><li><code>{error, Reason}</code>：读取失败，<code>Reason</code> 是错误原因。</li></ul><h4 id="示例-4" tabindex="-1"><a class="header-anchor" href="#示例-4"><span>示例</span></a></h4><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">ok</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Line</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">read_line</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">FileHandle</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-file-write-2" tabindex="-1"><a class="header-anchor" href="#_4-file-write-2"><span>4. <code>file:write/2</code></span></a></h3><blockquote><p>将二进制数据写入到文件中。</p></blockquote><h4 id="签名-3" tabindex="-1"><a class="header-anchor" href="#签名-3"><span>签名</span></a></h4><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">write</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">FileHandle</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> pid</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Data</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> binary</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">())</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -&gt;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> ok</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> | </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Reason</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> term</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()}</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><span style="color:#00FF00;">参数：</span></p><ul><li><code>FileHandle</code>：文件句柄，类型为 <code>pid()</code>。</li><li><code>Data</code>：要写入的数据，类型为 <code>binary()</code>。</li></ul><p><span style="color:#00FF00;">返回值：</span></p><ul><li><p><code>ok</code>：写入成功。</p></li><li><p><code>{error, Reason}</code>：写入失败，<code>Reason</code> 是错误原因。</p></li></ul><h4 id="示例-5" tabindex="-1"><a class="header-anchor" href="#示例-5"><span>示例</span></a></h4><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">write</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">FileHandle</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &lt;&lt;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">72</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 101</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 108</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 108</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 111</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;&gt;)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.  </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">% 写入&quot;Hello&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_5-file-close-1" tabindex="-1"><a class="header-anchor" href="#_5-file-close-1"><span>5. <code>file:close/1</code></span></a></h3><blockquote><p>关闭文件句柄，释放资源。</p></blockquote><h4 id="签名-4" tabindex="-1"><a class="header-anchor" href="#签名-4"><span>签名</span></a></h4><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">close</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">FileHandle</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> pid</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">())</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -&gt;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> ok</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> | </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Reason</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> term</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()}</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><span style="color:#00FF00;">参数：</span></p><ul><li><code>FileHandle</code>：文件句柄，类型为 <code>pid()</code>。</li></ul><p><span style="color:#00FF00;">返回值：</span></p><ul><li><code>ok</code>：文件成功关闭。</li><li><code>{error, Reason}</code>：关闭失败，<code>Reason</code> 是错误原因。</li></ul><h4 id="示例-6" tabindex="-1"><a class="header-anchor" href="#示例-6"><span>示例</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>file:close(FileHandle).</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_6-file-delete-1" tabindex="-1"><a class="header-anchor" href="#_6-file-delete-1"><span>6. <code>file:delete/1</code></span></a></h3><blockquote><p>删除指定路径的文件。</p></blockquote><h4 id="签名-5" tabindex="-1"><a class="header-anchor" href="#签名-5"><span>签名</span></a></h4><div class="language-erlang line-numbers-mode" data-highlighter="shiki" data-ext="erlang" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">delete</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Path</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> string</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">())</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -&gt;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> ok</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> | </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Reason</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> term</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()}</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><span style="color:#00FF00;">参数：</span></p><ul><li><code>Path</code>：文件路径，类型为 <code>string()</code>。</li></ul><p><span style="color:#00FF00;">返回值：</span></p><ul><li><code>ok</code>：文件成功删除。</li><li><code>{error, Reason}</code>：删除失败，<code>Reason</code> 是失败原因。</li></ul><h4 id="示例-7" tabindex="-1"><a class="header-anchor" href="#示例-7"><span>示例</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>file:delete(&quot;example.txt&quot;).</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="filename模块" tabindex="-1"><a class="header-anchor" href="#filename模块"><span>filename模块</span></a></h2><blockquote><p>Erlang 标准库中用于处理文件路径的工具模块，它提供跨平台的文件路径操作函数，确保路径在不同操作系统（Unix、Windows等）上都能正确工作。</p></blockquote><table><thead><tr><th>函数</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td><code>filename:join(Components) -&gt; Path</code> <br><code>filename:join(Component1, Component2) -&gt; Path</code></td><td>安全地连接路径组件</td><td><code>filename:join([&quot;/home&quot;, &quot;user&quot;, &quot;app.erl&quot;]). % &quot;/home/user/app.erl&quot;</code><br><code>filename:join(&quot;dir&quot;, &quot;file.txt&quot;). % &quot;dir/file.txt&quot; (Unix) 或 &quot;dir\\\\file.txt&quot; (Windows)</code></td></tr><tr><td><code>filename:split(Path) -&gt; Components</code></td><td>将路径拆分为组件列表</td><td><code>filename:split(&quot;/home/user/file.txt&quot;). % [&quot;/&quot;, &quot;home&quot;, &quot;user&quot;, &quot;file.txt&quot;]</code></td></tr><tr><td><code>filename:extension(Filename) -&gt; Extension</code></td><td>获取扩展名（包含点）</td><td><code>filename:extension(&quot;app.erl&quot;). % &quot;.erl&quot;</code></td></tr><tr><td><code>filename:rootname(Filename) -&gt; Rootname</code><br><code>filename:rootname(Filename, Extension) -&gt; Rootname</code></td><td>移除扩展名</td><td><code>filename:rootname(&quot;app.erl&quot;). % &quot;app&quot;</code> <br><code>filename:rootname(&quot;app.beam&quot;, &quot;.beam&quot;). % &quot;app&quot;</code></td></tr><tr><td><code>filename:absname(Path) -&gt; AbsolutePath </code><br><code>filename:absname(Path, CurrentDir) -&gt; AbsolutePath</code></td><td>转换为绝对路径</td><td><code>filename:absname(&quot;file.txt&quot;). % &quot;/current/dir/file.txt&quot;</code> <br><code>filename:absname(&quot;../file.txt&quot;, &quot;/home&quot;). % &quot;/file.txt&quot;</code></td></tr><tr><td><code>filename:dirname(Path) -&gt; Dirname</code></td><td>获取目录部分</td><td><code>filename:dirname(&quot;/home/user/file.txt&quot;). % &quot;/home/user&quot;</code></td></tr><tr><td><code>filename:basename(Path) -&gt; Basename</code><br><code> filename:basename(Path, Extension) -&gt; Basename</code></td><td>获取文件名部分</td><td><code>filename:basename(&quot;/home/user/file.txt&quot;). % &quot;file.txt&quot;</code> <br><code>filename:basename(&quot;file.erl&quot;, &quot;.erl&quot;). % &quot;file&quot;</code></td></tr><tr><td><code>filename:nativename(Path) -&gt; NativePath</code></td><td>转换为平台原生格式</td><td><code>filename:nativename(&quot;dir/file&quot;). % &quot;dir\\\\file&quot; (Windows)</code></td></tr><tr><td><code>filename:flatten(Path) -&gt; FlatPath</code></td><td>转换为字符串（处理可能的深层列表）</td><td><code>filename:flatten([&quot;dir/&quot;, &quot;file&quot;]). % &quot;dir/file&quot;</code></td></tr><tr><td><code>filename:basedir(Type, Application) -&gt; Path</code></td><td>获取标准目录路径（跨平台）<br> <code>user_cache</code>：用户缓存目录<br> <code>user_config</code>：用户配置目录<br> <code>user_data</code>：用户数据目录 <code>user_log</code>：用户日志目录</td><td><code>filename:basedir(user_config, &quot;myapp&quot;). % &quot;/home/user/.config/myapp&quot; (Linux)</code></td></tr></tbody></table><h2 id="filelib-模块" tabindex="-1"><a class="header-anchor" href="#filelib-模块"><span>filelib 模块</span></a></h2><p>好的，下面是 <strong>Erlang <code>filelib</code></strong> 模块常用函数的简要说明，包括函数名称、功能说明和示例代码。</p><table><thead><tr><th>函数名称</th><th>功能说明</th><th>示例代码</th></tr></thead><tbody><tr><td><code>filelib:copy_file/2</code></td><td>将一个文件从源路径复制到目标路径。</td><td><code>filelib:copy_file(&quot;source.txt&quot;, &quot;destination.txt&quot;).</code></td></tr><tr><td><code>filelib:ensure_dir/1</code></td><td>确保目录存在，若不存在则创建该目录。</td><td><code>filelib:ensure_dir(&quot;new_directory&quot;).</code></td></tr><tr><td><code>filelib:wildcard/1</code></td><td>根据模式返回所有匹配该模式的文件路径。</td><td><code>filelib:wildcard(&quot;*.txt&quot;).</code></td></tr><tr><td><code>filelib:is_dir/1</code></td><td>检查指定路径是否是一个目录。</td><td><code>filelib:is_dir(&quot;/home/user&quot;).</code> 返回 <code>true</code></td></tr><tr><td><code>filelib:is_file/1</code></td><td>检查指定路径是否是一个文件。</td><td><code>filelib:is_file(&quot;/home/user/file.txt&quot;).</code> 返回 <code>true</code></td></tr></tbody></table><h2 id="math-模块" tabindex="-1"><a class="header-anchor" href="#math-模块"><span>math 模块</span></a></h2><p>以下是 Erlang <code>math</code> 模块的常用功能及其说明，以表格形式展示：</p><table><thead><tr><th><strong>函数名称</strong></th><th><strong>功能说明</strong></th><th><strong>示例</strong></th></tr></thead><tbody><tr><td><code>math:abs(X)</code></td><td>返回 <code>X</code> 的绝对值。</td><td><code>math:abs(-5)</code> 结果为 <code>5</code></td></tr><tr><td><code>math:ceil(X)</code></td><td>返回大于或等于 <code>X</code> 的最小整数（向上取整）。</td><td><code>math:ceil(2.3)</code> 结果为 <code>3</code></td></tr><tr><td><code>math:cos(X)</code></td><td>返回 <code>X</code> 的余弦值，<code>X</code> 以弧度为单位。</td><td><code>math:cos(math:pi())</code> 结果为 <code>-1</code></td></tr><tr><td><code>math:exp(X)</code></td><td>返回 <code>e</code>（自然对数的底数）的大于 <code>X</code> 的指数值，即 <code>e^X</code>。</td><td><code>math:exp(1)</code> 结果为 <code>2.718281828459045</code></td></tr><tr><td><code>math:floor(X)</code></td><td>返回小于或等于 <code>X</code> 的最大整数（向下取整）。</td><td><code>math:floor(2.7)</code> 结果为 <code>2</code></td></tr><tr><td><code>math:log(X)</code></td><td>返回 <code>X</code> 的自然对数（以 <code>e</code> 为底）。</td><td><code>math:log(2)</code> 结果为 <code>0.6931471805599453</code></td></tr><tr><td><code>math:log10(X)</code></td><td>返回 <code>X</code> 的以 10 为底的对数。</td><td><code>math:log10(100)</code> 结果为 <code>2</code></td></tr><tr><td><code>math:max(X, Y)</code></td><td>返回 <code>X</code> 和 <code>Y</code> 中的较大值。</td><td><code>math:max(3, 5)</code> 结果为 <code>5</code></td></tr><tr><td><code>math:min(X, Y)</code></td><td>返回 <code>X</code> 和 <code>Y</code> 中的较小值。</td><td><code>math:min(3, 5)</code> 结果为 <code>3</code></td></tr><tr><td><code>math:pow(X, Y)</code></td><td>返回 <code>X</code> 的 <code>Y</code> 次方，即 <code>X^Y</code>。</td><td><code>math:pow(2, 3)</code> 结果为 <code>8.0</code></td></tr><tr><td><code>math:sin(X)</code></td><td>返回 <code>X</code> 的正弦值，<code>X</code> 以弧度为单位。</td><td><code>math:sin(math:pi() / 2)</code> 结果为 <code>1.0</code></td></tr><tr><td><code>math:sqrt(X)</code></td><td>返回 <code>X</code> 的平方根。</td><td><code>math:sqrt(9)</code> 结果为 <code>3.0</code></td></tr><tr><td><code>math:tan(X)</code></td><td>返回 <code>X</code> 的正切值，<code>X</code> 以弧度为单位。</td><td><code>math:tan(math:pi() / 4)</code> 结果为 <code>1.0</code></td></tr><tr><td><code>math:pi()</code></td><td>返回圆周率常数 <code>π</code>。</td><td><code>math:pi()</code> 结果为 <code>3.141592653589793</code></td></tr><tr><td><code>math:rad(X)</code></td><td>将角度 <code>X</code> 转换为弧度。</td><td><code>math:rad(180)</code> 结果为 <code>3.141592653589793</code> (π)</td></tr><tr><td><code>math:deg(X)</code></td><td>将弧度 <code>X</code> 转换为角度。</td><td><code>math:deg(math:pi())</code> 结果为 <code>180.0</code></td></tr></tbody></table><h2 id="string-模块" tabindex="-1"><a class="header-anchor" href="#string-模块"><span>string 模块</span></a></h2><p>在 Erlang 中，<code>string</code> 模块提供了许多用于处理字符串（即字符列表）的方法。这些方法非常适合进行字符串查找、替换、拆分、连接等常见操作。</p><p>以下是 <code>string</code> 模块的常用方法及其简要说明：</p><table><thead><tr><th><strong>函数名称</strong></th><th><strong>功能说明</strong></th><th><strong>示例</strong></th></tr></thead><tbody><tr><td><code>string:concat/1</code></td><td>将一组字符串连接成一个字符串。</td><td><code>string:concat([&quot;Hello&quot;, &quot; &quot;, &quot;World&quot;])</code> 结果为 <code>&quot;Hello World&quot;</code></td></tr><tr><td><code>string:join/2</code></td><td>将一个字符串列表按照指定的分隔符连接成一个字符串。</td><td><code>string:join([&quot;apple&quot;, &quot;banana&quot;, &quot;cherry&quot;], &quot;, &quot;)</code> 结果为 <code>&quot;apple, banana, cherry&quot;</code></td></tr><tr><td><code>string:split/2</code></td><td>将一个字符串按指定的分隔符拆分成一个列表。</td><td><code>string:split(&quot;apple,banana,cherry&quot;, &quot;,&quot;)</code> 结果为 <code>[&quot;apple&quot;, &quot;banana&quot;, &quot;cherry&quot;]</code></td></tr><tr><td><code>string:strip/1</code></td><td>去掉字符串两端的空白字符（空格、换行、制表符等）。</td><td><code>string:strip(&quot; hello &quot;)</code> 结果为 <code>&quot;hello&quot;</code></td></tr><tr><td><code>string:to_lower/1</code></td><td>将字符串中的所有字符转换为小写字母。</td><td><code>string:to_lower(&quot;HELLO&quot;)</code> 结果为 <code>&quot;hello&quot;</code></td></tr><tr><td><code>string:to_upper/1</code></td><td>将字符串中的所有字符转换为大写字母。</td><td><code>string:to_upper(&quot;hello&quot;)</code> 结果为 <code>&quot;HELLO&quot;</code></td></tr><tr><td><code>string:replace/3</code></td><td>替换字符串中的匹配子字符串。</td><td><code>string:replace(&quot;hello world&quot;, &quot;world&quot;, &quot;Erlang&quot;)</code> 结果为 <code>&quot;hello Erlang&quot;</code></td></tr><tr><td><code>string:trim/1</code></td><td>删除字符串两端的空白字符。</td><td><code>string:trim(&quot; hello &quot;)</code> 结果为 <code>&quot;hello&quot;</code></td></tr><tr><td><code>string:len/1</code></td><td>返回字符串的长度（即字符的数量）。</td><td><code>string:len(&quot;hello&quot;)</code> 结果为 <code>5</code></td></tr><tr><td><code>string:reverse/1</code></td><td>反转字符串中的字符顺序。</td><td><code>string:reverse(&quot;hello&quot;)</code> 结果为 <code>&quot;olleh&quot;</code></td></tr><tr><td><code>string:to_list/1</code></td><td>将字符串转换为字符列表（Erlang 中的字符串本质上是字符列表）。</td><td><code>string:to_list(&quot;hello&quot;)</code> 结果为 <code>[104, 101, 108, 108, 111]</code></td></tr><tr><td><code>string:from_list/1</code></td><td>将字符列表转换为字符串。</td><td><code>string:from_list([104, 101, 108, 108, 111])</code> 结果为 <code>&quot;hello&quot;</code></td></tr><tr><td><code>string:equal/2</code></td><td>返回两个字符串是否相等</td><td><code>string:equal(&quot;world&quot;, &quot;world&quot;)</code> 结果为 <code>true</code></td></tr><tr><td><code>string:substr/3</code></td><td>根据起始位置和截取长度返回子字符串，以 1 开始的索引</td><td><code>string:substr(&quot;hello&quot;, 2,4)</code> 结果为 <code>&quot;ello&quot;</code></td></tr></tbody></table><h2 id="lists-模块" tabindex="-1"><a class="header-anchor" href="#lists-模块"><span>lists 模块</span></a></h2><p><code>lists</code> 模块是 Erlang 中提供的一个非常实用的模块，专门用于处理列表操作。Erlang 的列表是基础数据结构之一，因此 <code>lists</code> 模块提供了大量的函数，用于对列表进行各种操作，如遍历、变换、过滤、排序等。</p><p>以下是 <code>lists</code> 模块中一些常用的函数及其功能说明：</p><table><thead><tr><th><strong>函数名称</strong></th><th><strong>功能说明</strong></th><th><strong>示例</strong></th></tr></thead><tbody><tr><td><code>lists:append/2</code></td><td>将两个列表连接成一个列表。</td><td><code>lists:append([1,2], [3,4])</code> 结果为 <code>[1, 2, 3, 4]</code></td></tr><tr><td><code>lists:flatten/1</code></td><td>将嵌套的列表结构扁平化，转换为一个平坦的列表。</td><td><code>lists:flatten([1, [2, 3], 4])</code> 结果为 <code>[1, 2, 3, 4]</code></td></tr><tr><td><code>lists:reverse/1</code></td><td>反转一个列表。</td><td><code>lists:reverse([1,2,3])</code> 结果为 <code>[3, 2, 1]</code></td></tr><tr><td><code>lists:map/2</code></td><td>对列表中的每个元素应用给定的函数，返回一个新的列表。</td><td><code>lists:map(fun(X) -&gt; X * 2 end, [1, 2, 3])</code> 结果为 <code>[2, 4, 6]</code></td></tr><tr><td><code>lists:filter/2</code></td><td>对列表中的元素进行过滤，只保留符合条件的元素，返回一个新的列表。</td><td><code>lists:filter(fun(X) -&gt; X rem 2 == 0 end, [1, 2, 3, 4])</code> 结果为 <code>[2, 4]</code></td></tr><tr><td><code>lists:all/2</code></td><td>所有元素都满足条件，返回 true, 否则 false</td><td><code>lists:all(fun(X) -&gt; X &lt;5 end, [1, 2, 3, 4])</code> 结果为 <code>true</code></td></tr><tr><td><code>lists:any/2</code></td><td>只要有一个元素都满足条件，返回 true, 否则 false</td><td><code>lists:any(fun(X) -&gt; X &gt;3 end, [1, 2, 3, 4])</code> 结果为 <code>true</code></td></tr><tr><td><code>lists:member/2</code></td><td>检查一个元素是否在列表中，返回 <code>true</code> 或 <code>false</code>。</td><td><code>lists:member(3, [1, 2, 3])</code> 结果为 <code>true</code></td></tr><tr><td><code>lists:concat/1</code></td><td>将一个列表的列表拼接成一个大的列表。</td><td><code>lists:concat([[1, 2], [3, 4], [5, 6]])</code> 结果为 <code>[1, 2, 3, 4, 5, 6]</code></td></tr><tr><td><code>lists:delete/2</code></td><td>删除列表中第一次出现的指定元素。</td><td><code>lists:delete(3, [1, 2, 3, 4])</code> 结果为 <code>[1, 2, 4]</code></td></tr><tr><td><code>lists:sort/1</code></td><td>对列表进行排序，默认按照升序排序。</td><td><code>lists:sort([3, 1, 4, 2])</code> 结果为 <code>[1, 2, 3, 4]</code></td></tr><tr><td><code>lists:keyfind/3</code></td><td>在一个由键值对组成的列表中查找具有指定键的元素，返回找到的元素。</td><td><code>lists:keyfind(2, 1, [{1, &quot;a&quot;}, {2, &quot;b&quot;}, {3, &quot;c&quot;}])</code> 结果为 <code>{2, &quot;b&quot;}</code></td></tr><tr><td><code>lists:keysearch/3</code></td><td>在一个由键值对组成的列表中查找具有指定键的元素，返回 <code>true</code> 或 <code>false</code>。</td><td><code>lists:keysearch(2, 1, [{1, &quot;a&quot;}, {2, &quot;b&quot;}, {3, &quot;c&quot;}])</code> 结果为 <code>true</code></td></tr><tr><td><code>lists:flatten/1</code></td><td>将一个嵌套的列表结构扁平化。</td><td><code>lists:flatten([1, [2, 3], 4])</code> 结果为 <code>[1, 2, 3, 4]</code></td></tr><tr><td><code>lists:seq/2</code></td><td>生成一个从 <code>Start</code> 到 <code>End</code> 的整数列表。</td><td><code>lists:seq(1, 5)</code> 结果为 <code>[1, 2, 3, 4, 5]</code></td></tr><tr><td><code>lists:seq/3</code></td><td>生成一个从 <code>Start</code> 到 <code>End</code>，步长为 <code>Step</code> 的整数列表。</td><td><code>lists:seq(1, 10, 2)</code> 结果为 <code>[1, 3, 5, 7, 9]</code></td></tr><tr><td><code>lists:sum/1</code></td><td>计算列表所有元素的和，要求列表中的元素是数字。</td><td><code>lists:sum([1, 2, 3])</code> 结果为 <code>6</code></td></tr><tr><td><code>lists:max/1</code></td><td>返回列表中的最大值。</td><td><code>lists:max([1, 3, 2])</code> 结果为 <code>3</code></td></tr><tr><td><code>lists:min/1</code></td><td>返回列表中的最小值。</td><td><code>lists:min([1, 3, 2])</code> 结果为 <code>1</code></td></tr><tr><td><code>lists:zip/2</code></td><td>将两个列表“压缩”成一个包含元组的列表。</td><td><code>lists:zip([1, 2, 3], [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;])</code> 结果为 <code>[{1, &quot;a&quot;}, {2, &quot;b&quot;}, {3, &quot;c&quot;}]</code></td></tr></tbody></table>`,210)]))}const r=s(a,[["render",l]]),o=JSON.parse('{"path":"/backend/erlang/hphwak2b/","title":"内置模块","lang":"zh-CN","frontmatter":{"title":"内置模块","createTime":"2025/03/22 16:15:39","permalink":"/backend/erlang/hphwak2b/"},"headers":[],"readingTime":{"minutes":34.02,"words":10205},"git":{"updatedTime":1758260391000,"contributors":[{"name":"舒永好","username":"舒永好","email":"shuyonghao@guoshenghuaxing.com","commits":2,"avatar":"https://gravatar.com/avatar/4b1c3f37ea707968be73c631a79de33afd360724ce87bf8f9dcacd67d14df92c?d=retro"},{"name":"syh","username":"syh","email":"syh@qq.com","commits":9,"avatar":"https://gravatar.com/avatar/060d67e779a1b0aeace68a2a010b367f852e56888393383ea27302df983f6814?d=retro"}]},"filePathRelative":"notes/backend/erlang/erlang_foundation/inline_module.md"}');export{r as comp,o as data};

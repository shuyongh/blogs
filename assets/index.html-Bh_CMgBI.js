import{_ as p,c as e,a,o as s}from"./app-C7T5jqfQ.js";const r="/blogs/assets/image-20250618175850527-Bi3omrow.png",n="/blogs/assets/image-20250618175916332-8EIoyF1d.png",A="/blogs/assets/image-20250618180000891-EWn80xwK.png",l="/blogs/assets/image-20250618180013292-C_gYI9JP.png",o="/blogs/assets/image-20250618180027499-BmgWZYCo.png",d="/blogs/assets/image-20250618180047918-5Lnw2ieO.png",i="/blogs/assets/image-20250618180304042-DleAuT2q.png",m="data:image/png;base64,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",c={};function g(f,t){return s(),e("div",null,t[0]||(t[0]=[a('<h2 id="博弈树搜索算法" tabindex="-1"><a class="header-anchor" href="#博弈树搜索算法"><span>博弈树搜索算法</span></a></h2><blockquote><p>可以看出，该推算过程本质上就是一个搜索算法。具体来说，对于当前棋局，我方有许多种落子方法，对于我方的每种落子方法，对方又有许多种落子方法，而对于对方的每种落子方法，我方又有许多种落子方法……这样，往后多推算几步，有利于看清当前棋局中的最佳落子点和潜在威胁。</p></blockquote><p><img src="'+r+'" alt="image-20250618175850527"></p><p>如图所示，在当前棋局1，有两颗白子，现在是黑方回合。黑方可以落子形成棋局2，也可以落子形成棋局3。如果黑方落子形成棋局2，则白方可以落子形成棋局4和棋局5，如果黑方落子形成棋局3，则白方可以落子形成棋局6和棋局7。</p><p>黑白双方都会选择对自己最有利的落子点，站在黑方的角度，黑方下一步会使黑方的胜算最大，而白方的下一步会使黑方的胜算最小。该过程反映在搜索树中是这样的，若当前节点是黑方回合，则找一个对黑方最佳的落子点，若当前节点是白方回合，则找一个对黑方最差的落子点。</p><p>最佳落子点和最差落子点是一个很模糊的说法，我们需要量化最佳落子点和最差落子点，即对每种落子方法打分。具体来说，我们需要建立一套评分机制，该评分机制需要满足：对于任一棋局，该棋局对黑方越有利则分数越高，该棋局对黑方越不利则分数越低。对于某一棋局，黑白双方可能需要再下几十甚至上百步才能使游戏结束，这意味着搜索树的深度会达到几十甚至上百层。例如，每种棋局考虑10种落子方法，推算50步，则搜索树是一棵50层的十叉数，搜索量是巨大的。所以，我们的评分机制不仅要对已经结束的棋局进行打分，还要能估算未结束棋局的分数。我们把这个评分机制称为“估价函数”。</p><p>至此，算法的主题思想已叙述完毕。下面，我们结合一个实例将算法的主要步骤叙述一遍。</p><p><img src="'+n+'" alt="image-20250618175916332"></p><p>如图所示是一棵搜索树，每一个节点就是一个棋局。当前处于0号节点，当前深度是0，当前是黑方回合。我们的搜索树向后推算三步，一共得到8种可能的棋局（7～14号节点），使用估价函数对这8个节点进行估计，将得到的分数用红色字体写在节点下方。节点3是黑方回合，黑方会选择对自己最有利的走法，此时黑方会走到节点8，同理，节点4的黑方会走到节点9，节点5的黑方会走到节点11，节点6的黑方会走到节点14。节点1的白方，会选择对自己最有利的走法，该走法使得黑方得分最低，所以节点1的白方会走到节点3，同理，节点2的白方会走到节点5。节点0的黑方会选择对自己最有利的走法，黑方会走到节点1。因此，处于当前棋局的黑方，会落子形成节点1的棋局，该落子点就是当前的最佳落子点。</p><p>0、3、4、5、6号节点是黑方节点，这些节点会选择下一层中估值最大的那个节点，因此我们称这些节点为“MAX节点”。而1、2、7、8、9、10、11、12、13、14号节点是白方节点，这些节点会选择下一层中估值最小的那个节点，因此我们称这些节点为“MIN节点”。每一层要么全是MAX节点，要么全是MIN节点，即MAX节点和MIN节点隔层交替出现。</p><p>MAX节点寻找极大值，MIN节点寻找极小值，所以该搜索算法称为“极大极小搜索”算法，该搜索树称为“极大极小搜索树”，亦称为“博弈树”。</p><h2 id="α-─-β-剪枝" tabindex="-1"><a class="header-anchor" href="#α-─-β-剪枝"><span><code>α ─ β</code> 剪枝</span></a></h2><blockquote><p>在上述博弈树搜索的过程中，我们把深度范围内的全部节点都访问了一遍。这导致算法的搜索量特别大，算法效率低下。事实上，遍历全部节点是没有必要的，我们可以对博弈树搜索算法进行剪枝优化。</p></blockquote><p>我们分别考虑当前节点是MAX节点和MIN节点的情况，约定函数f(node)表示节点node的估值得分，有</p><p>◆ 当前节点是MAX节点：当前节点记为M，节点M有一个MIN子节点，记为m1，且f(m1)=α，则必有f(M)≥α。这是因为节点M是MAX节点，会选择所有子节点中估值最大的那个节点，所以MAX节点不会选择估值比α还小的子节点，而只会选择估值比α还大的子节点，所以得到f(M)≥α，该值称为“MAX节点的α值”，α值刻画了MAX节点的下界；</p><p>◆ 当前节点是MIN节点：当前节点记为m，节点m有一个MAX子节点，记为M1，且f(M1)=β,则必有f(m)≤β，这是因为节点m是MIN节点，会选择所有子节点中估值最小的那个节点，所以MIN节点不会选择估值比β还大的子节点，而只会选择估值比β还小的子节点，所以得到f(m)≤β，该值称为“MIN节点的β值”，β值刻画了MIN节点的上界；</p><p>我们通过一个实例来具体介绍上述思想是如何进行剪枝优化的。我们还是以图3中的博弈树为例，采用深度优先搜索（DFS）算法遍历，假设最大搜索深度为3。搜索过程叙述如下：</p><p>◆ 从节点0开始，遍历过程：0→1→3→7，如图所示。节点7达到最大深度，用估价函数得到f(7)=-5。对于MAX节点3，必有f(3)≥-5，接着往上推，对于MIN节点1，必有f(1)≤-5，最后，对于MAX节点0，必有f(0)≥-5；</p><p><img src="'+A+'" alt="image-20250618180000891"></p><p>从节点3继续，遍历过程：3→8，如图所示。节点8达到最大深度，用估价函数得到f(8)=5。更新节点3得到f(3)≥5，更新节点1得到f(1)≤5，更新节点0得到f(0)≥5；</p><p><img src="'+l+'" alt="image-20250618180013292"></p><p>从节点1继续，遍历过程：1→4→9，如图所示。节点9达到最大深度，用估价函数得到f(9)=10。更新节点4得到f(4)≥10。此时，f(3)≥5，f(4)≥10，MIN节点1会选择有更小估值的节点3，而不会选择有更大估值的节点4。所以，节点4的任何子节点都不需要再继续搜索下去了，即节点10被剪枝掉了； <img src="'+o+'" alt="image-20250618180027499"></p><p>◆ 从节点0继续，遍历过程：0→2→5→11，如图7所示。节点11达到最大深度，用估价函数得到f(11)=-4。更新节点5得到f(5)≥-4，更新节点2得到f(2)≤-4。此时，f(1)≤5，f(2)≤-4，MAX节点0会选择有更大估值的节点1，而不会选择有更小估值的节点2。所以，节点2的任何子节点都不需要再继续搜索下去了，即节点2被剪枝掉了。从图中可以看出，6、12、13、14号节点都是节点2的子节点，这四个节点都被剪枝掉了； <img src="'+d+'" alt="image-20250618180047918"></p><p>◆ 至此，搜索过程全部结束，前往节点1是最优选择；</p><p>下面我们叙述一般情况的α-β剪枝规则：</p><p>α剪枝：当前节点是MIN节点，其β值小于等于其父节点的α值，则可以将以当前节点为根节点的子树剪枝，该剪枝称为“α剪枝”；</p><p>β剪枝：当前节点是MAX节点，其α值大于等于其父节点的β值，则可以将以当前节点为根节点的子树剪枝，该剪枝称为“β剪枝”；</p><p>根据上述对α-β剪枝规则的定义2，我们知道，在博弈树搜索过程中，第一次剪枝属于β剪枝，第二次剪枝属于α剪枝</p><h2 id="估价函数" tabindex="-1"><a class="header-anchor" href="#估价函数"><span>估价函数</span></a></h2><blockquote><p>从上文的叙述中可以看出，估价函数的好坏直接影响了决策树的搜索过程和路径判断，所以估价函数的定义至关重要。在同一个应用场景中，不同学者定义的估价函数往往都不一样，这也就导致决策树的效率和正确率都有很大偏差。</p></blockquote><p>首先，我们给出“五元组”的定义。五元组指棋盘上连续的五个位置，包括横向、纵向、主对角线方向、副对角线方向，一共4个方向。图8展示了这4种五元组的形态，其中红色方框表示一个竖向五元组，黄色方框表示一个横向五元组，蓝色方框表示一个主对角线方向五元组，绿色方框表示一个副对角线方向五元组。</p><p><img src="'+i+'" alt="image-20250618180304042"></p><p>对于棋盘上每一个落子点，我们规定使用‘B’表示该点是黑子(Black)，‘W’表示该点是白子(White)，‘0’表示该点为空，‘*’表示该点可能为任何三种状态（黑子点、白子点、空点）。这样，我们可以表示出每个五元组内部的落子情况。方向先从上到下，再从左到右。我们用该符号表示图8中的4个五元组，结果如表1所示。</p><table><thead><tr><th>方框颜色</th><th>符号表示</th></tr></thead><tbody><tr><td>红色方框</td><td>B000W</td></tr><tr><td>黄色方框</td><td>B0W0W</td></tr><tr><td>蓝色方框</td><td>B0WBW</td></tr><tr><td>绿色方框</td><td>BBBWW</td></tr></tbody></table><p>对于每个五元组，我们定义评分规则如下：</p><p>（1）同时含有黑子和白子，得0分； （2）含有1个黑子和4个空点，得+1分； （3）含有2个黑子和3个空点，得+10分； （4）含有3个黑子和2个空点，得+100分； （5）含有4个黑子和1个空点，得+10000分； （6）含有5个黑子，得+1000000分； （7）含有1个白子和4个空点，得-1分； （8）含有2个白子和3个空点，得-10分； （9）形如“0WWW0”，得-2000分； （10）含有3个白子和2个空点，得-1000分； （11）含有4个白子和1个空点，得-100000分； （12）含有5个白子，得-10000000分；</p><p>该评分规则的使用法则是：从上到下匹配，返回第一条匹配规则的分值。例如，五元组“0WWW0”符合第9条和第10条规则，但是优先匹配第9条规则，所以返回分值-2000。</p><p>我们设计该评分规则的想法是：</p><p>◆ 若某个五元组同时含有黑子和白子，则任何一方都无法形成“五子连线”而获胜，该五元组无意义，所以第1条为0分；</p><p>◆ 我们偏向保守规则，即防守优先于进攻，所以“仅含3个黑子五元组的分值(100)”＜“仅含3个白子五元组的分值(1000)”＜“仅含4个黑子五元组的分值(10000)”＜“仅含4个白子五元组的分值(100000)”＜“含5个黑子五元组的分值(1000000)”＜“含5个白子五元组的分值(10000000)”，分值是按等级依次递增的，且下一等级的分值为上一等级分值的10倍；</p><p>◆ 在第9条中，我们单独列出了形如“0WWW0”的五元组。因为在实际测试过程中，我们发现如果棋局出现“00WWW00”的局面，由于搜索顺序的原因，黑方会这样落子，形成“B0WWW00”的局面，这显然是不合理的，因为白方下一步可以形成“B0WWWW0”的局面，从而赢得比赛，所以我们给“0WWW0”相对于同一等级更高的分值；</p><p>我们的已经定义了针对单个五元组的评分规则，我们定义当前棋局的总得分为全部五元组得分的总和。形式化地，设W是棋局上全部的五元组集合，w是单个五元组，score(S)表示单个五元组的得分，设总得分为S，则</p><p><img src="'+m+'" alt="image-20250618180346646"></p>',43)]))}const b=p(c,[["render",g]]),h=JSON.parse('{"path":"/article/9jx5t25g/","title":"博弈树(极大极小搜索算法)","lang":"zh-CN","frontmatter":{"title":"博弈树(极大极小搜索算法)","createTime":"2025/06/18 17:55:11","permalink":"/article/9jx5t25g/","tags":["算法","AI"]},"headers":[],"readingTime":{"minutes":10.57,"words":3172},"git":{"updatedTime":1750241093000,"contributors":[{"name":"syh","username":"syh","email":"syh@qq.com","commits":1,"avatar":"https://gravatar.com/avatar/060d67e779a1b0aeace68a2a010b367f852e56888393383ea27302df983f6814?d=retro"}]},"filePathRelative":"blog/算法/max_min_tree.md","categoryList":[{"id":"126ac9","sort":10004,"name":"blog"},{"id":"44f0ef","sort":10006,"name":"算法"}]}');export{b as comp,h as data};
